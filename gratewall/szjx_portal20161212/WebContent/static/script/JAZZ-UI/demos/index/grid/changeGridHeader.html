<!DOCTYPE html PUBLIC>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="../jazz-ui.js" type="text/javascript"></script> 
<script>
	
  	//动态修改表头
	function changeHeader(){
    	//1.先销毁gridpanel
		$('div[name="gridpanel"]').gridpanel('destroyComp');
    	//2.替换新表头列
    	var a = 
    		'<div>'+ 
				'<div name="id" key="true" visible="false"></div>'+
				'<div name="name"  text="姓名" textalign="center" sort="true" width="200px"></div>'+
				'<div name="sex" text="性别" textalign="center" sort="true" dataurl="[{"text":"男","value":"1"},{"text":"女","value":"2"}]" width="150px"></div>'+
				'<div name="age" text="年龄" textalign="center" width="150px"></div>'+
				'<div name="org" text="所属机构" textalign="center"  dataurl="/JAZZ/dictionary/queryData.do?dicId=org" width="150px"></div>'+
				'<div name="birthday" text="出生日期" textalign="center" datatype="date" width="150px"></div>'+
				'<div name="custom" text="自定义" textalign="center" sort="true" width="150px"></div>'+
			'</div>'
		$('div[name="grid_column"]').children().remove();
		$('div[name="grid_column"]').append(a);
		
		//3.根据options重新创建gridpanel
    	$('div[name="gridpanel"]').parseComponent();
    }
	
  	//数据渲染函数
    function renderdata(data){
		for(var i=0;i<data.length;i++){
			data[i]["@toolsopration"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+data[i]["name"]+'</a></div>';
			data[i]["custom"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+data[i]["name"]+'</a></div>';
		}
		return data;
    }
</script>
</head>
<body>
<div vtype="button" text="重载表头" click="changeHeader()" ></div>
<div vtype="gridpanel" name="gridpanel" height="400" width="700"  dataloadcomplete=""  datarender="renderdata()" 
	titleDisplay="true" title="查询结果" dataurl="reg.json" isshowselecthelper="false" selecttype="2">
	<!-- 表头（多级表头） -->
	<div vtype="gridcolumn" name="grid_column" >
		<div> <!-- 第1行 -->
			<div name="id" key="true" visible="false"  rowspan='2'></div>
			<div text="基本信息" textalign="center" colspan="2"></div>
			<div text="高级信息" textalign="center" colspan="3"></div>
			<div name="custom" text="自定义" textalign="center" rowspan='2' width="140px"></div>
		</div>
		<div> <!-- 第2行 -->
			<div name="name"  text="姓名" textalign="center" sort="true" width="150px"></div>
			<div name="sex" text="性别" textalign="center" sort="true" dataurl='[{"text":"男","value":"1"},{"text":"女","value":"2"}]' width="50px"></div>
			<div name="age" text="年龄" textalign="center" sort="true" width="50px"></div>
			<div name="org" text="所属机构" textalign="center" sort="true" dataurl="/JAZZ/dictionary/queryData.do?dicId=org" width="100px"></div>
			<div name="birthday" text="出生日期" textalign="center" datatype="date" dataformat="" width="150px"></div>
		</div>
	</div>
	<!-- 表格 -->
	<div vtype="gridtable" name="grid_table"></div>
	<!-- 分页 -->
	<div vtype="paginator" name="grid_paginator" theme="2" pagerows="10"></div>
</div>

</body>
</html>