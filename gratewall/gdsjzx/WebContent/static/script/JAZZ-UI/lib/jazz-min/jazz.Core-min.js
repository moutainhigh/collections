(function($){window.undefined=window.undefined;var jazz={version:"1.0",namespace:function(ns){if(!ns||!ns.length){return null}var levels=ns.split(".");var nsobj=jazz;for(var i=(levels[0]=="jazz")?1:0;i<levels.length;++i){nsobj[levels[i]]=nsobj[levels[i]]||{};nsobj=nsobj[levels[i]]}return nsobj},log:function(info){if(this.config.logger){return console.log("***JAZZ-UI LOG.INFO***",info)}else{return false}}};jazz.namespace("layout");jazz.namespace("config");jazz.namespace("util");jazz.namespace("window");window.jazz=jazz})();(function($){$.extend(jazz,{vtypetree:function(element,createtype){if(!element.data("vtypetree")){var parent=element.parents("div[vtype]:first");if(parent.size()==0){parent=$("BODY")}var parentData=parent.data("vtypetree")||{parent:"",child:{},createtype:createtype};var childName=element.attr("name")||element.attr("id")||jazz.getId();parentData.child[childName]=element;parent.data("vtypetree",parentData);var nodeData={parent:"",child:{},createtype:createtype};nodeData.parent=parent;nodeData.vtype=element.attr("vtype");element.data("vtypetree",nodeData);_vtype.push(nodeData.vtype)}},_isComponentInited:function(element){var nodeData=element.data("vtypetree")||{};if(!!nodeData.vtype){return !!element.data(nodeData.vtype)}nodeData=null;return false},_parse:function(element){jazz.vtypetree(element,"0");var dataurl=element.attr("dataurl");if(dataurl&&!/^\s*[\[|{](.*)/.test(dataurl)){return[dataurl]}var valueSet=[];if("gridcolumn"===element.attr("vtype")){element.children().children().each(function(){var dataurl=$(this).attr("dataurl");if(dataurl&&!/^\s*[\[|{](.*)/.test(dataurl)){valueSet.push(dataurl)}});return valueSet}},_initComponent:function(element,options){var nodeData=element.data("vtypetree")||{};var el=$(element);if(!!nodeData.vtype){if(!jazz._isComponentInited(el)&&nodeData.createtype=="0"){var attrtooptions=jazz.attributeToOptions(el);if(!!options){attrtooptions=$.extend(attrtooptions,options)}attrtooptions.createtype=nodeData.createtype;(el[nodeData.vtype])(attrtooptions)}}var childNodes=nodeData.child;if(!!childNodes){for(var c in childNodes){jazz._initComponent(childNodes[c])}}if(!!nodeData.vtype&&jazz._isComponentInited(el)&&nodeData.createtype=="0"){(el[nodeData.vtype])("finish")}}});var _vtype=[];var _getRequireFile=function(vtype,fn){var vtypetree=[],files=[],filePath=jazz.config.jsFilePath||{};$.each(vtype,function(i,el){if($.inArray(el,vtypetree)===-1){vtypetree.push(el)}});$.each(vtypetree,function(i,v){if($.inArray(filePath[v],files)===-1){files.push(filePath[v])}});require(files,function(){fn()})};$.fn.parseComponent=function(options){var $this=$(this);var links=[],ret;if(!$this.data("vtypetree")){if($this.attr("vtype")){ret=jazz._parse($this);if(ret&&ret.length){links=links.concat(ret)}}$this.find("div[vtype]").each(function(i,obj){ret=jazz._parse($(this));if(ret&&ret.length){links=links.concat(ret)}})}if(jazz.config.isUseRequireJS===true){_getRequireFile(_vtype,function(){jazz._initComponent($this,options);if(window.G){G.processData(links,true)}else{}})}else{if(window.G){G.processData(links,true)}else{}jazz._initComponent($this,options)}};$.fn.getChildrenComponent=function(){var nodeData=$(this).data("vtypetree")||{};return nodeData.child||{}};$.fn.notifyResize=function(){var parent=$(this).parents("div[vtype]:first");var name=parent.attr("name")||"";if(name){$.each(parent.getChildrenComponent(),function(){var element=$(this);var vtype=element.attr("vtype");element.data(vtype)._resizeWidth();element.data(vtype)._resizeHeight()})}};$(function(){$("BODY").parseComponent()});var plugins=(function(){var ary=[],p;for(p in jazz.config.jsFilePath){if(jazz.config.jsFilePath.hasOwnProperty(p)){ary.push(p)}}return ary})();$.each(plugins,function(i,pluginName){$.fn[pluginName]=function(options,nodes){this.initflag=false;var that=this;if(!this.initflag){require([jazz.config.jsFilePath[pluginName]],function(){this.initflag=true;if(pluginName==="tree"){$.fn.zTree.init(that,options.setting,options.znodes)}else{that[pluginName](options)}})}else{jazz.log(" something unreachable unless error")}}})})(jQuery);(function($){jazz.config={contextpath:"JAZZ",compNumber:1000,errorMessageNumber:0,default_upload_url:"",default_download_url:"",default_preview_url:"",default_flash_url:"",default_flash9_url:"",delayButtonDisabled:false,fieldIconWidth:20,fieldBlankText:"",fieldDefaultWidth:150,fieldDefaultHeight:46,fieldLabelWidth:80,isGroupRequest:false,isUseRequireJS:false,jazzRoot:"/JAZZ/jazz/",jsFilePath:{accordionpanel:"jazz.AccordionPanel",attachment:"jazz.Attachment",button:"jazz.Button",date:"jazz.Date",DataAdapter:"DataAdapter",formpanel:"jazz.FormPanel",gridtable:"jazz.GridPanel",gridcolumn:"jazz.GridPanel",gridpanel:"jazz.GridPanel",icon:"jazz.Icon",imageviewer:"jazz.ImageView",layout:"jazz.Layout",loading:"jazz.Loading",menu:"jazz.Menu",contextmenu:"jazz.Menu",message:"jazz.Message",paginator:"jazz.Paginator",panel:"jazz.Panel",tabpanel:"jazz.TabPanel",toolbar:"jazz.Toolbar",tooltip:"jazz.Tooltip",tree:"jazz.Tree",zTree:"jazz.Tree",paginator:"jazz.Paginator",window:"jazz.Window",autocompletecombox:"form/jazz.form.AutocompleteComboxField",checkboxfield:"form/jazz.form.CheckboxField",colorfield:"form/jazz.form.ColorField",comboxfield:"form/jazz.form.ComboxField",comboxtreefield:"form/jazz.form.ComboxTree",datefield:"form/jazz.form.DateField",dropdownfield:"form/jazz.form.DropdownField",hiddenfield:"form/jazz.form.HiddenField",numberfield:"form/jazz.form.NumberField",passwordfield:"form/jazz.form.PasswordField",radiofield:"form/jazz.form.RadioField",textareafield:"form/jazz.form.TextareaField",textfield:"form/jazz.form.TextField"},logger:false,platForm:"other",prefixPosition:0,paginatorStyle:"text",ruleImgWidth:20,scrollWidth:17,submitShowLoading:false,valuetip:"",zindex:10000,i18n:{chooseFile:"请选择文件",password:"请输入密码",wait:"请稍后...",fileName:"文件名",fileSize:"文件大小",fileDelete:"删除",fileDownload:"下载",fileEdit:"编辑",fileAffix:"附件",fileAdd:"增加",fileCancel:"取消",number:"数字",numberInt:"整数",numberFloat:"浮点数",numberPlusInt:"大于等于0的整数",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一","十二"],days:["日","一","二","三","四","五","六"],dateOrder:["年","月","日","时","分","秒"],bizSucMsg:"校验成功!",bizFaiMsg:"校验失败!",sysMsg:"系统错误!",saveSuc:"保存成功!",saveFai:"保存失败!",save:"提交",cancel:"取消",button:"按钮",firstPage:"首页",endPage:"末页",nextPage:"下一页",previousPage:"上一页",titleName:"提示框",okBtnName:"确定",cancelBtnName:"取消",defineBtnName:"自定义",boxMin:"最小化",boxMax:"最大化",boxNatural:"正常化",boxClose:"关闭",selectLoading:"正在加载数据请稍后...",toolEdit:"编辑",toolNew:"新建",toolDel:"删除",toolFresh:"刷新",toolOpen:"打开",toolFind:"查找",toolSave:"保存",toolBack:"返回",toolExport:"导出",toolAddtime:"增加时间",toolReducetime:"减少时间",toolAddright:"授权",toolReduceright:"撤权",num:"数字",numInt:"整数",numFloat:"浮点数",numScience:"科学计数法",character:"字符",chinese:"汉字",twoBytes:"双字节",english:"英文",date:"日期格式不正确",numChar:"数字或字符",numEnglish:"数字英文字符",qq:"QQ号码",telephone:"座机号码",cellphone:"手机号码",idcard:"请输入正确的身份证号码",postal:"邮政编码",currency:"美元",email:"邮箱地址",url:"URL地址",and1:",且",or:",或者",must:"不能为空",contrast:"数值",range:"数值范围为",customCheckStyle:"不允许输入以下字符",length1:"字符串长度为",customFunction:"自定义校验",area:["","","","","","","","","","","","北京","天津","河北","山西","内蒙古","","","","","","辽宁","吉林","黑龙江","","","","","","","","上海","江苏","浙江","安微","福建","江西","山东","","","","河南","湖北","湖南","广东","广西","海南","","","","重庆","四川","贵州","云南","西藏","","","","","","","陕西","甘肃","青海","宁夏","新疆","","","","","","台湾","","","","","","","","","","香港","澳门","","","","","","","","","国外"],tabMenuFresh:"刷新",tabMenuClose:"关闭当前项",tabMenuCloseAll:"关闭所有项",tabMenuCloseOthers:"关闭其他项"}};var _config=window.JAZZUICONFIG||{};$.extend(jazz.config,_config)})(jQuery);(function($){jazz.util={attributeToOptions:function(obj){var att=null;if(obj instanceof jQuery){if(obj.size()<1){jazz.log("未找到满足条件的对象，无法获取全部属性，直接返回空json");return{}}att=obj.get(0).attributes}else{att=obj.attributes}var j=0;var attObj="{";for(var i=0,len=att.length;i<len;i++){var o=att[i];if(o.specified){var _v=jQuery.trim(o.value+""),f=0;if(_v.length>0){_v=_v.replace(/[\r\n|\t]/g," ");if((_v+"").charAt(0)=="["||(_v+"").charAt(0)=="{"){f=1}}else{_v=""}if(j===0){attObj=attObj+'"'+o.name+'": '}else{attObj=attObj+', "'+o.name+'": '}if(f==0){attObj=attObj+'"'+_v+'"'}else{attObj=attObj+_v}j++}}attObj=attObj+"}";return jazz.stringToJson(attObj)},confirm:function(message,sure,cancel){if(jazz.config.isUseRequireJS===true){require(["jazz.Message"],function(){if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(that.getBodyObject()).message({title:"确认信息",showtype:3,detail:message,sure:sure,cancel:cancel})}})}else{if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(this.getBodyObject()).message({title:"确认信息",showtype:3,detail:message,sure:sure,cancel:cancel})}}},doTooltip:function($this,val,rule,regMsg){var ruleImg=$this.ruleImg,ruleType=$this.options.ruletype;obj=jazz_validator.doValidator(val,rule,regMsg,$this);if($this.options.msg){obj.msg=$this.options.msg}if(ruleType==2){$this.inputtext.tooltip({isbindevent:false,content:obj.msg,iconclass:"jazz-tooltip-default-icon",position:{at:"left bottom",my:"left top",collision:"flipfit flipfit",of:$this.inputtext}})}if(!obj.state){$this.parent.addClass("jazz_validator_border");if(ruleType!=2){ruleImg.removeClass("jazz-helper-hidden");ruleImg.attr("title",obj.msg)}else{if(ruleType==2){$this.inputtext.tooltip("show");$this.inputtext.off("mouseover.tooltip mouseout.tooltip blur.tooltip").on("mouseover.tooltip",function(){$this.inputtext.tooltip("show")}).on("mouseout.tooltip",function(){$this.inputtext.tooltip("hide")}).on("blur.tooltip",function(){$this.inputtext.tooltip("hide")})}}}else{$this.parent.removeClass("jazz_validator_border");if(ruleType!=2){ruleImg.addClass("jazz-helper-hidden")}else{if(ruleType==2){$this.inputtext.off("mouseover.tooltip mouseout.tooltip blur.tooltip");$this.inputtext.tooltip("hide")}}}return obj.state},escapeRegExp:function(string){return string.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},error:function(message,sure){var that=this;if(jazz.config.isUseRequireJS===true){if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(that.getBodyObject()).message({title:"错误信息",showtype:1,detail:message,sure:sure})}}else{if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(this.getBodyObject()).message({title:"错误信息",showtype:1,detail:message,sure:sure})}}},getBodyObject:function(){if(!this.$bodyobject){this.$bodyobject=$("body")}return this.$bodyobject},getId:function(){return"comp_j_"+jazz.getRandom()+"_"+(++jazz.config.compNumber)},getParameter:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2])}return null},getParameters:function(){var url=window.location.search;var params={};if(url.indexOf("?")!=-1){var str=url.substr(1);var strs=str.split("&");for(var i=0,len=strs.length;i<len;i++){params[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}}return params},getRandom:function(){return Math.random().toString().substr(2,8)},getTop:function(){var dom=window;if(dom.top.jazz){dom=dom.top.window}else{while(dom.parent){if(dom.parent==dom){break}dom=dom.parent}}if(dom.jazz){return dom}return dom},getIndex:function(){return jazz.config.zindex++},inArray:function(arr,item){for(var i=0,len=arr.length;i<len;i++){if(arr[i]===item){return true}}return false},info:function(message,sure){var that=this;if(jazz.config.isUseRequireJS===true){require(["jazz.Message"],function(){$("<div>").appendTo(that.getBodyObject()).message({title:"提示信息",showtype:0,detail:message,sure:sure})})}else{$("<div>").appendTo(this.getBodyObject()).message({title:"提示信息",showtype:0,detail:message,sure:sure})}},isArray:function(v){return Object.prototype.toString.apply(v)==="[object Array]"},isDate:function(v){return Object.prototype.toString.apply(v)==="[object Date]"},isIE:function(version){return($.browser.msie&&parseInt($.browser.version,10)===version)?true:false},isNumber:function(n){return $.isNumeric(n)},isNormalSize:function(n){if(/^(\d+(\.\d+)?|\d+(\.\d+)?%)$/.test(n)){return true}else{return false}},jsonToString:function(o){if(typeof o=="undefined"||o===null){return"null"}else{if(jazz.isArray(o)){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i++){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":jazz.jsonToString(v));b=true}}a.push("]");return a.join("")}else{if(jazz.isDate(o)){return'"'+o.getFullYear()+"-"+jazz.pad(o.getMonth()+1)+"-"+jazz.pad(o.getDate())+" "+jazz.pad(o.getHours())+":"+jazz.pad(o.getMinutes())+":"+jazz.pad(o.getSeconds())+'"'}else{if(typeof o=="string"){var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(o)){return'"'+o.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+o+'"'}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(typeof o=="boolean"){return String(o)}else{var a=["{"],b,i,v;for(i in o){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(jazz.jsonToString(i),":",v===null?"null":jazz.jsonToString(v));b=true}}a.push("}");return a.join("").replace(/&nbsp;/ig," ")}}}}}}},pad:function(n){return n<10?"0"+n:n},parseDataByDataFormat:function(formatParams){if(!formatParams){return""}var cellvalue=formatParams.cellvalue;var datatype=formatParams.datatype;var dataformat=formatParams.dataformat;if(cellvalue==""||cellvalue==undefined||cellvalue==null){return""}if(!datatype){return cellvalue}var showvalue="";if(datatype=="date"||datatype=="datefield"){cellvalue=cellvalue.replace(/\.0*$/i,"");dataformat=dataformat||"YYYY-MM-DD HH:mm:ss";showvalue=jazz.dataFormater(cellvalue,dataformat)}else{if(datatype=="number"||datatype=="numberfield"){dataformat=dataformat||"";showvalue=jazz.dataFormater(cellvalue,dataformat)}else{showvalue=cellvalue}}return showvalue},stringToJson:function(string){if(string){if(string instanceof Object){return{}}else{return eval("("+string+")")}}else{return{}}},transformBoolean:function(b){return(b=="true"||b==true)?true:false},warn:function(message,sure){var that=this;if(jazz.config.isUseRequireJS===true){require(["jazz.Message"],function(){if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(that.getBodyObject()).message({title:"警告信息",showtype:2,detail:message,sure:sure})}})}else{if(jazz.config.errorMessageNumber==0){$("<div>").appendTo(this.getBodyObject()).message({title:"警告信息",showtype:2,detail:message,sure:sure})}}},windowHeight:function(){if($.browser.msie){return document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:(document.body&&document.body.clientHeight)}else{return self.innerHeight}},windowWidth:function(){if($.browser.msie){return document.compatMode=="CSS1Compat"?document.documentElement.clientWidth:(document.body&&document.body.clientWidth)}else{return self.innerWidth}}};jazz.window={close:function(e){var iframeNumber=0;var target=e.target,$target=$(target);var tParent=$target.parent();function _findWindow(tParent){var t=tParent;if(t.is("body")){var frameElement=window.frameElement;if(frameElement){var _divObj=$(frameElement).parent();var $div=$(_divObj);iframeNumber++;_findWindow($div)}else{jazz.log("jazz.window.close frame error.");return}}else{if(t.hasClass("jazz-window")){var dom=window;try{if(dom.top.$(t[0]).data("window")){dom.top.$(t[0]).data("window").close();return}else{while(dom){if(dom.$(t[0]).data("window")){dom.$(t[0]).data("window").close();return}else{dom=dom.parent}}}}catch(ex){jazz.log("jazz.window.close top error.");return}}else{if(t.parent()){_findWindow(t.parent())}}}}_findWindow(tParent)}};$.extend(jazz,jazz.util)})(jQuery);(function($){var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(len,radix){var chars=CHARS,uuid=[],i;radix=radix||chars.length;if(len){for(i=0;i<len;i++){uuid[i]=chars[0|Math.random()*radix]}}else{var r;uuid[8]=uuid[13]=uuid[18]=uuid[23]="-";uuid[14]="4";for(i=0;i<36;i++){if(!uuid[i]){r=0|Math.random()*16;uuid[i]=chars[(i==19)?(r&3)|8:r]}}}return uuid.join("")};Math.uuidFast=function(){var chars=CHARS,uuid=new Array(36),rnd=0,r;for(var i=0;i<36;i++){if(i==8||i==13||i==18||i==23){uuid[i]="-"}else{if(i==14){uuid[i]="4"}else{if(rnd<=2){rnd=33554432+(Math.random()*16777216)|0}r=rnd&15;rnd=rnd>>4;uuid[i]=chars[(i==19)?(r&3)|8:r]}}}return uuid.join("")};Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)})}})(jQuery);jazz.namespace("listener");(function($){jazz.listener={fitlistener:{pood:[],config:[],add:function(obj,config){this.pood.push(obj);this.config.push(config)},start:function(){var $this=this;var fitobject=null,parentobject=null,bodyobject=null,cacheFitHeight=[],parentHeight=0,siblingheight=0,overflow_x=null,overflow_x=null;if(this.cleartimeout){this.stop()}this.cleartimeout=setInterval(function(){for(var i=0,len=$this.pood.length;i<len;i++){fitobject=$this.pood[i];parentobject=fitobject.parent();if(parentobject[0].nodeName=="BODY"){bodyobject=$(document.body);parentHeight=jazz.util.windowHeight()-(bodyobject.outerHeight(true)-bodyobject.height())}else{parentHeight=parentobject.height()}$.each(fitobject.siblings(),function(){if($(this).css("display")!="none"&&$(this).attr("islayout")!="no"&&$(this).css("position")!="fixed"&&$(this).css("position")!="absolute"){siblingheight+=$(this).outerHeight(true)}});fitHeight=parentHeight-siblingheight;if(cacheFitHeight[i]!=fitHeight){overflow_x=parentobject.css("overflow-x");overflow_y=parentobject.css("overflow-y");parentobject.css("overflow-x","hidden");parentobject.css("overflow-y","hidden");fitobject.outerHeight(fitHeight,true);cacheFitHeight[i]=fitHeight;if($this.config[i]&&$this.config[i].callback&&($.isFunction($this.config[i].callback))){$this.config[i].callback.call($this)}parentobject.css("overflow-x",overflow_x);parentobject.css("overflow-y",overflow_y)}siblingheight=0}},300)},stop:function(){if(this.cleartimeout){clearInterval(this.cleartimeout)}}}}})(jQuery);(function($){if(!jazz.isIE(6)){var _winWidth=jazz.windowWidth(),_winHeight=jazz.windowHeight();var timerID="timerLayout_"+jazz.getRandom();$(window).off("resize.jazzwindow").on("resize.jazzwindow",function(){if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;window[timerID]=setTimeout(function(){resizeAll()},100)});function resizeAll(){var _width=jazz.windowWidth(),_height=jazz.windowHeight();var body=$("body");var overflow_x=body.css("overflow-x");body.css("overflow-x","hidden");$.each($("body").getChildrenComponent(),function(i,obj){var element=$(this);var vtype=element.attr("vtype"),el=element.data(vtype)||"";if(el){if(_winWidth!=_width){el._resizeWidth()}if(_winHeight!=_height){el._resizeHeight()}}});body.css("overflow-x",overflow_x);_winWidth=_width;_winHeight=_height}}})(jQuery);(function($){$(document).off("mousedown").on("mousedown",function(e){var target=e.target,$target=$(target);var droppanels=$("div.jazz-dropdown-panel.jazz-widget-content.jazz-helper-hidden");$.each(droppanels,function(){if($(this).is(":hidden")){return}var dropvtype=$(this).attr("type");if(dropvtype=="datefield"||dropvtype=="colorfield"||dropvtype=="autocompletecomboxfield"||dropvtype=="comboxfield"||dropvtype=="comboxtreefield"){var dropname=$(this).attr("name").substring(14);var dropinput=$("div[name="+dropname+"]").data(dropvtype).inputtext;var droptrigger=$("div[name="+dropname+"]").data(dropvtype).trigger;if(target==dropinput.get(0)||target==droptrigger.get(0)){return}var dropprefix=$("div[name="+dropname+"]").data(dropvtype).prefix;if(dropprefix){if(target==dropprefix.get(0)){return}}var dropsuffix=$("div[name="+dropname+"]").data(dropvtype).suffix;if(dropsuffix){if(target==dropsuffix.get(0)){return}}}var offset=$(this).offset();if(e.pageX<offset.left||e.pageX>offset.left+$(this).width()||e.pageY<offset.top||e.pageY>offset.top+$(this).height()){$(this).hide();if(dropvtype=="datefield"||dropvtype=="colorfield"||dropvtype=="autocompletecomboxfield"||dropvtype=="comboxfield"||dropvtype=="comboxtreefield"){var data=$("div[name="+dropname+"]").data(dropvtype)._changeData();$("div[name="+dropname+"]").data(dropvtype)._event("change",e,data)}}if($(".jazz-date-list-year").children().length>0){$(".jazz-date-list-year").hide()}if($(".jazz-date-list-month").children().length>0){$(".jazz-date-list-month").hide()}})})})(jQuery);var G=window.G||{};G.pageCache=[];G.isGetAll=jazz.config.isGroupRequest||false;G.groupUrl={};G.processData=function(links,type){if(G.isGetAll==false){return}var $this=this,use=G.groupUrl;var counter=0,tmpUse=[];for(var i=0,len=links.length;i<len;i++){var key=links[i].replace(/([\s|\S]+=)((\w+,)*\w+)$/g,"$1"),param=links[i].replace(/([\s|\S]+=)((\w+,)*\w+)$/g,"$2");if(/(\/JAZZ\/dictionary\/queryData\.do\?dicId=)((\w+,)*\w+)$/.test(links[i])){if(use.hasOwnProperty(key)){if(use[key].indexOf("@@")==-1){tmpUse.push(links[i])}else{tmpUse.push(key+param)}use[key]+=("@@"+param)}else{use[key]=param;tmpUse.push(key+param)}counter++}}if(counter>1){for(var i=0,len=tmpUse.length;i<len;i++){$this._beforeRequestByGroup(tmpUse[i])}}for(var key in use){use[key]=use[key].replace(/@@/g,",");$this.getPageDataSetCache(key+use[key])}};G._setPageCacheByURL=function(cacheName,cacheParam){cacheParam=cacheParam||"";var i=0,$this=this;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName&&cacheParam==G.pageCache[i].cacheParam){return}i++}G.pageCache.push({cacheName:cacheName,cacheParam:cacheParam,data:[],status:"ready"});$.ajax({type:"POST",url:cacheName,dataType:"text",success:function(data){var i=0,tmpdata;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName){tmpdata=eval("("+data+")");if(jazz.config.platForm=="sword"&&!!tmpdata.data[0]){tmpdata.data=tmpdata.data[0].data}G.pageCache[i].data=tmpdata;G.pageCache[i].status="success";break}i++}},error:function(data){var i=0;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName){G.pageCache[i].status="error";break}i++}},complete:function(data){}})};G._beforeRequestByGroup=function(cacheName,cacheParam){if(!G.isGetAll){return}var i=0,$this=this;cacheParam=cacheParam||"";while(i<G.pageDataSetCache.length){if(cacheName==G.pageDataSetCache[i].cacheName&&cacheParam==G.pageDataSetCache[i].cacheParam){return}i++}G.pageDataSetCache.push({cacheName:cacheName,cacheParam:cacheParam,data:[],status:"ready"})};G._getCacheNameIndex=function(cacheParam){var $this=this;for(var i=0,len=$this.pageDataSetCache.length;i<len;i++){if($this.pageDataSetCache[i]["cacheName"].indexOf(cacheParam)>-1){return i}}};G.getPageCacheByCode=function(cacheName,code,cacheParam){cacheParam=cacheParam||"";var i=0;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName&&cacheParam==G.pageCache[i].cacheParam&&G.pageCache[i].data.data!=undefined){var j=0;while(j<G.pageCache[i].data.data.length){if(G.pageCache[i].data.data[j].id){if(code==G.pageCache[i].data.data[j].id){var d={status:G.pageCache[i].status,data:G.pageCache[i].data.data[j].name};return d}}if(G.pageCache[i].data.data[j].value){if(code==G.pageCache[i].data.data[j].value){var d={status:G.pageCache[i].status,data:G.pageCache[i].data.data[j].label};return d}}j++}}i++}G._setPageCacheByURL(cacheName,cacheParam);var d={status:"ready",data:undefined};return d},G.getPageCache=function(cacheName,cacheParam){cacheParam=cacheParam||"";var i=0;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName&&cacheParam==G.pageCache[i].cacheParam){var d={status:G.pageCache[i].status,data:G.pageCache[i].data};return d}i++}G._setPageCacheByURL(cacheName,cacheParam);var d={status:"ready",data:[]};return d};G.getPageCacheByParentId=function(cacheName,key){var dataArray=[];var i=0;while(i<G.pageCache.length){if(cacheName==G.pageCache[i].cacheName){if(key!=undefined){var j=0;while(j<G.pageCache[i].data.data.length){if(key==G.pageCache[i].data.data[j].parentFloatId){dataArray.push(G.pageCache[i].data.data[j])}j++}return dataArray}else{return G.pageCache[i].data.data}break}i++}return null};G.pageDataSetCache=[];G._setPageDataSetCacheByURL=function(cacheName,cacheParams,flag){var i=0,$this=this;while(i<G.pageDataSetCache.length){if(cacheName==G.pageDataSetCache[i].cacheName){if(!flag){return}}i++}G.pageDataSetCache.push({cacheName:cacheName,cacheParams:cacheParams,data:{},status:"ready"});this.r_jazzData=new Object();this.r_dataArray=new Array();this.r_jazzData.data=this.r_dataArray;var postData=null;if(jazz.config.platForm=="sword"){this.r_jazzData=new Object();this.r_dataArray=new Array();this.r_jazzData.data=this.r_dataArray;if(jazz.isIE(7)||jazz.isIE(6)){if(typeof(cacheParams)!="object"){cacheParams=jazz.stringToJson(cacheParams)}}if(!!cacheParams){$.each(cacheParams,function(param,i){var _newDataObj={};_newDataObj.sword="attr";_newDataObj.name=param;_newDataObj.value=cacheParams[param]+"";$this.r_dataArray.push(_newDataObj)})}else{var index=decodeURI(cacheName).indexOf("?");var params=decodeURI(cacheName).substring(index+1).split("&");$.each(params,function(i,param){var data=param.split("=");var _newDataObj={};_newDataObj.sword="attr";_newDataObj.name=data[0];_newDataObj.value=data[1]+"";$this.r_dataArray.push(_newDataObj)})}this.r_jazzData.tid=decodeURI(cacheName)}else{if(!!cacheParams){$.each(cacheParams,function(param,i){var _newDataObj={};_newDataObj.vtype="attr";_newDataObj.name=param;_newDataObj.data=cacheParams[param];$this.r_dataArray.push(_newDataObj)})}else{var index=decodeURI(cacheName).indexOf("?");var params=decodeURI(cacheName).substring(index+1).split("&");$.each(params,function(i,param){var data=param.split("=");var _newDataObj={};_newDataObj.vtype="attr";_newDataObj.name=data[0];_newDataObj.data=data[1];if(!!data[1]){$this.r_dataArray.push(_newDataObj)}})}}postData={};postData.postData=jazz.jsonToString(this.r_jazzData);if($this.isGetAll){var params=cacheName.split("=");if(params.length==2){for(var key in G.groupUrl){if(G.groupUrl[key]!=params[1]&&G.groupUrl[key].indexOf(params[1])>-1){var index=$this._getCacheNameIndex(cacheName);if($this.pageDataSetCache[index]["status"]!="success"){return}}}}}$.ajax({type:"POST",url:cacheName,dataType:"text",data:postData,success:function(data){var datajson=null;if(jazz.config.platForm=="sword"){var newdata=data.replace(/label/g,"text");var newdatajson=jazz.stringToJson(newdata);datajson={data:{}};if(!!newdatajson.data[0]){datajson.data=newdatajson.data[0].data}datajson=jazz.jsonToString(datajson)}else{datajson=data}var i=0;while(i<G.pageDataSetCache.length){if(cacheName==G.pageDataSetCache[i].cacheName){var requestParams=G._isInGroupUrl(cacheName);if(requestParams){var group=requestParams.params.split(","),groupData=jazz.stringToJson(datajson);for(var j=0;j<group.length;j++){var pi=$this._getCacheNameIndex(requestParams.url+group[j]);G.pageDataSetCache[pi].data=groupData.data[j];G.pageDataSetCache[pi].status="success"}}datajson=jazz.stringToJson(datajson);G.pageDataSetCache[i].data=datajson.data;G.pageDataSetCache[i].status="success";break}i++}},error:function(data){var i=0;while(i<G.pageDataSetCache.length){if(cacheName==G.pageDataSetCache[i].cacheName){G.pageDataSetCache[i].status="error";break}i++}},complete:function(data){}})};G._isInGroupUrl=function(cacheName){if(!G.isGetAll){return false}for(var key in G.groupUrl){if(cacheName.indexOf(key+G.groupUrl[key])>-1){return{url:key,params:G.groupUrl[key]}}}return false};G.getPageDataSetCache=function(cacheName,cacheParams,flag){var i=0;while(i<G.pageDataSetCache.length){if(cacheName==G.pageDataSetCache[i].cacheName){if((flag==true&&(G.pageDataSetCache[i]["status"]!="ready"&&G.pageDataSetCache[i]["status"]=="success"))||(flag==true&&G.pageDataSetCache[i]["status"]=="success")||(G._isInGroupUrl(cacheName))){if(!!cacheName){G._setPageDataSetCacheByURL(cacheName,cacheParams,flag)}}var d={cacheName:cacheName,cacheParams:cacheParams,status:G.pageDataSetCache[i].status,data:G.pageDataSetCache[i].data};return d}i++}if(!!cacheName){G._setPageDataSetCacheByURL(cacheName,cacheParams)}var d={cacheName:cacheName,cacheParams:cacheParams,status:"ready",data:{}};return d};jazz.namespace("widget");jazz.widget=function(options,parent){if(typeof(options)=="object"){var vtype=options.vtype||"";if(!vtype){alert(" vtype 未定义！");return false}else{var obj=null;if(!!parent){obj=$("<div>").appendTo(parent)}else{obj=$("<div>").appendTo("body")}obj[vtype](options);obj[vtype]("finish");return obj}}};