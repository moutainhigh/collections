(function($,factory){if(jazz.config.isUseRequireJS===true){define(["jquery","jazz.Component"],factory)}else{factory($)}})(jQuery,function($){$.widget("jazz.boxComponent",$.jazz.component,{options:{calculateheight:-1,calculatewidth:-1,calculateinnerheight:-1,calculateinnerwidth:-1,height:-1,width:-1,resize:null},_create:function(){this._super()},_init:function(){this._super()},_getCalculatePercentHeight:function(height,parent){var parentinnerheight;if(parent[0].nodeName=="BODY"){var sw=0;if(this.isScrollX(parent)){sw=jazz.config.scrollWidth}parentinnerheight=jazz.util.windowHeight()-(parent.outerHeight(true)-parent.height())-sw}else{parentinnerheight=parent.height();var h2=parent[0].clientHeight;if(h2<parentinnerheight){parentinnerheight=h2}}var n=parseFloat(height.substring(0,(height+"").length-1));n=(n/100)*parentinnerheight;return Math.floor(n)},_getCalculatePercentWidth:function(width,parent){var parentinnerwidth;if(parent[0].nodeName=="BODY"){var sw=0;if(this.isScrollY(parent)){sw=jazz.config.scrollWidth}parentinnerwidth=jazz.util.windowWidth()-(parent.outerWidth(true)-parent.width())-sw}else{parentinnerwidth=parent.width();var w2=parent[0].clientWidth;if(w2<parentinnerwidth){parentinnerwidth=w2}}var n=parseFloat(width.substring(0,(width+"").length-1));n=(n/100)*parentinnerwidth;return Math.floor(n)},_height:function(forcecalculate){var height=this.options.height;if((jazz.isNormalSize(height)&&this.options.calculateheight!=height)||forcecalculate){if(jazz.isNumber(height)){this.element.outerHeight(height,true);this.options.calculateheight=height;this.options.calculateinnerheight=this.element.height();this.iscalculateheight=true}else{if(/^\d+(\.\d+)?%$/.test(height)){var parent=this.element.parent();var n=this._getCalculatePercentHeight(height,parent);if(this.options.calculateheight===n&&!forcecalculate){this.iscalculateheight=false}else{this.element.outerHeight(n,true);this.options.calculateheight=n;this.options.calculateinnerheight=this.element.height();this.iscalculateheight=true}}}}else{this.iscalculateheight=false}},_width:function(forcecalculate){var width=this.options.width;if(this.options.width==-1){width="100%"}if((jazz.isNormalSize(width)&&this.options.calculatewidth!=width)||forcecalculate){if(jazz.isNumber(width)){this.element.outerWidth(width);this.options.calculatewidth=width;this.options.calculateinnerwidth=this.element.width();this.iscalculatewidth=true}else{if(/^\d+(\.\d+)?%$/.test(width)){var parent=this.element.parent();var n=this._getCalculatePercentWidth(width,parent,forcecalculate);if(this.options.calculatewidth===n&&!forcecalculate){this.iscalculatewidth=false}else{this.element.outerWidth(n);this.options.calculatewidth=n;this.options.calculateinnerwidth=this.element.width();this.iscalculatewidth=true}}}}else{this.iscalculatewidth=false}},_reflashLayout:function(){if(this.layoutobject){this.layoutobject.reflashLayout(this,this.layoutcontainer,this.options.layoutconfig)}},_reflashChildHeight:function(forcecalculate){$.each(this.getChildrenComponent(),function(i,obj){var element=$(this);var vtype=element.attr("vtype");var el=element.data(vtype);if(el){el._resizeHeight(forcecalculate)}})},_reflashChildWidth:function(forcecalculate){$.each(this.getChildrenComponent(),function(i,obj){var element=$(this);var vtype=element.attr("vtype");var el=element.data(vtype);if(el){el._resizeWidth(forcecalculate)}})},_resizeHeight:function(forcecalculate){var y="";if(this.content){y=this.content.css("overflow-y");this.content.css("overflow-y","hidden")}this._height(forcecalculate);if(this.iscalculateheight){if(this.layoutobject){this.layoutobject.reflashLayoutBefore()}this._reflashLayout();this._reflashChildHeight(forcecalculate);if(this.layoutobject){this.layoutobject.reflashLayoutAfter()}}if(this.content){this.content.css("overflow-y",y)}},_resizeWidth:function(forcecalculate){var x="";if(this.content){x=this.content.css("overflow-x");this.content.css("overflow-x","hidden")}this._width(forcecalculate);if(this.iscalculatewidth){if(this.layoutobject){this.layoutobject.reflashLayoutBefore()}this._reflashLayout();this._reflashChildWidth(forcecalculate);if(this.layoutobject){this.layoutobject.reflashLayoutAfter()}}if(this.content){this.content.css("overflow-x",x)}},_setOption:function(key,value){switch(key){case"width":if(jazz.isNormalSize(value)){this.options.width=value;this._width();if(this.iscalculatewidth){this._reflashLayout();this._reflashChildWidth()}}break;case"height":if(jazz.isNormalSize(value)){this.options.height=value;this._height();if(this.iscalculateheight){this._reflashLayout();this._reflashChildHeight()}}break}this._super(key,value)},layoutSwitch:function(region,showSize){if(this.layoutobject){this.layoutobject.layoutSwitch(region,showSize)}},getPageSize:function(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight}}var windowWidth,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){windowWidth=document.documentElement.clientWidth}else{windowWidth=self.innerWidth}windowHeight=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight}else{if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight}}}if(yScroll<windowHeight){pageHeight=windowHeight}else{pageHeight=yScroll}if(xScroll<windowWidth){pageWidth=xScroll}else{pageWidth=windowWidth}return{pageWidth:pageWidth,pageHeight:pageHeight,windowWidth:windowWidth,windowHeight:windowHeight}},isScrollX:function(obj){var scrollX=false;if(obj[0]){if(obj[0].tagName=="BODY"){var elems=[document.documentElement,document.body];for(var i=0;i<elems.length;i++){var o=elems[i];var sl=o.scrollLeft;o.scrollLeft+=(sl>0)?-1:1;o.scrollLeft!==sl&&(scrollX=scrollX||true);o.scrollLeft=sl}}else{if(obj.width()>obj[0].clientWidth){scrollX=true}}}return scrollX},isScrollY:function(obj){var scrollY=false;if(obj[0]){if(obj[0].tagName=="BODY"){var elems=[document.documentElement,document.body];for(var i=0;i<elems.length;i++){var o=elems[i];var st=o.scrollTop;o.scrollTop+=(st>0)?-1:1;o.scrollTop!==st&&(scrollY=scrollY||true);o.scrollTop=st}}else{if(obj.height()>obj[0].clientHeight){scrollY=true}}}return scrollY},resizeWH:function(forcecalculate){this._resizeWidth(forcecalculate);this._resizeHeight(forcecalculate)}})});