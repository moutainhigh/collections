<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../../../external/jquery-ui/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />
<link href="../../../themes/default/jazz-all.css" rel="stylesheet" type="text/css" />

<script src="../../../external/jquery-1.8.3.js" type="text/javascript"></script>
<script src="../../../external/jquery-ui-1.9.2.custom.js" type="text/javascript"></script>
<script src="../../../jazz/jazz-all.js" type="text/javascript"></script>
<!-- <script src="http://172.30.18.5:8081/JAZZ/demos/classic/grid/jsonp.js" type="text/javascript"></script> -->
<script>
    
    function test1(){
    	$.ajax({
			url: "http://172.30.18.5/JAZZ/demo/queryUser.do",//"http://localhost:8082/JAZZ/demo/queryUser.do",
			async: true,
			contentType: "application/x-www-form-urlencoded; charset=utf-8", 
			error: function() {
				alert("this function has error..");
			},
			complete: function(){
				alert("this function is completed..");
			},
			success: function(){
				alert("this function is successed..");	
			}
		});
    }
    function jsoncallback(data){
		alert(data.name);    	
    }
    //一、jsonp json padding技术
    function writeData(data){
    	console.log(data);
    }
    function testJsonp(){
    	$.ajax({
			async: true,
			url: "http://localhost:8081/JAZZ/servlet/testJsonp",
			data: null,
			dataType:"jsonp",
			type:"GET",
			contentType: "application/x-www-form-urlencoded; charset=utf-8", 
			//jsonp: "jsoncallback",
			jsonpCallback: "jsoncallback",
			success: function(data){
				alert(222);
				console.log(data);
			}
		});
    }
    function testJsonpReal(){
    	///var url = "http://localhost:8081/JAZZ/servlet/testJsonp";
    	var url = "http://172.30.18.5:8081/JAZZ/servlet/testJsonp?callback=writeData";
    	var script = document.createElement("script");
    	script.setAttribute("src", url);
    	script.setAttribute("type","text/javascript");
    	var head = document.getElementsByTagName("head")[0];
    	head.appendChild(script);
    }
    function testWindowName(){
    	document.domain = "gwssi.com";
 		window.name="this is grid4 ...";
    	var frame = document.getElementById("fram1");
    	
    	var win = frame.contentWindow;
    	var doc = win.document;
    	var name = win.name;
    	console.log(name);
    }
    function testPostMessage(){
    	var frame = document.getElementById("fram1");
    	var win = frame.contentWindow;
    	win.postMessage("555555555","*");
    }
    
    function testCookie(){
    	//var url = "http://172.30.18.5:8081/JAZZ/servlet/testJsonp?callback=writeData";
    	document.cookie="sex=male"
    	document.domain = "gwssi.com";
    	var frame = document.getElementById("fram1");
    	var win = frame.contentWindow;
    	var doc = win.document;
    	var name = doc.cookie;
    	alert(name);
    }
    
    var i = localStorage.getItem("count");
    if(i){
    	
    }else{
    	localStorage.name="lihuayun";
    	localStorage.book="javascriptbook";
    }
    if (localStorage.pagecount)
      {
      localStorage.pagecount=Number(localStorage.pagecount) +1;
      }
    else
      {
      localStorage.pagecount=1;
      }
    console.log("Visits "+ localStorage.pagecount + " time(s).");
    
</script>
</head>
<body>
<!-- 
<br><br><br><br>
<button onclick="testJsonpReal()" >发送请求</button>
<button onclick="testWindowName()" >test window name</button>
<button onclick="testPostMessage()" >test postMessage</button>
<button onclick="testCookie()" >test cookie</button>
<iframe id="fram1" style="width:800px;height:300px;" src="http://test.gwssi.com:8081/JAZZ/demos/classic/grid/a.html"></iframe>
<br><br><br><br> -->

<div style="width:800px;height:600px;border:1px solid red;">
<div id='i2' imagesrc="transformer.jpg" vtype="imageviewer" name="imgviewer" width=800 height=600 isshowcontextmenu=true></div>
<!--    <div id='i3' imagesrc="./images/car.jpg" vtype="imageviewer" name="imgviewer_car"></div> -->
</div>


</body>
</html>