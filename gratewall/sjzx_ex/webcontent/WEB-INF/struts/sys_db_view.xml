<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config SYSTEM "gwssi-struts.dtd">
<struts-config>
  <menu-name>数据库视图管理</menu-name>
  <menu-path>/page/resource/res/runmgr/dbmgr/viewmgr/</menu-path>
  <description>数据库视图管理</description>
  <form-beans>
    <form-bean name="SysDbViewRowsetForm">
      <description>多记录查询</description>
      <form-property prefix="select-key" name="view_code" type="string" size="20" description="视图代码"/>
      <form-property prefix="select-key" name="view_name" type="string" size="20" description="数据库视图名称"/>
      <form-property prefix="select-key" name="create_by" type="string" size="32" description="创建人"/>
      <form-property prefix="select-key" name="create_date" type="string" size="10" description="创建日期"/>
      <form-property prefix="select-key" name="dczd_fjd" type="string" size="4" cannull="true" description="调查制度父节点代码"/>
      <form-property prefix="select-key" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="select-key" name="showall" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="select-key" name="create_start_date" type="string" size="10" cannull="false" description="创建日期起"/>
      <form-property prefix="select-key" name="create_end_date" type="string" size="10" cannull="false" description="创建日期止"/>
      <form-property prefix="record" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="record" name="view_name" type="string" size="20" cannull="false" description="数据库视图名称"/>
      <form-property prefix="record" name="dczd_dm" type="string" size="4" cannull="false" description="主题代码"/>
      <form-property prefix="record" name="table_no" type="string" size="2000" cannull="false" description="数据表编码"/>
      <form-property prefix="record" name="column_no" type="string" size="2000" cannull="true" description="字段编码"/>
      <form-property prefix="record" name="create_date" type="string" size="10" cannull="false" description="创建日期"/>
      <form-property prefix="record" name="create_by" type="string" size="32" cannull="false" description="创建人"/>
      <form-property prefix="record" name="view_desc" type="string" size="1000" cannull="true" description="备注"/>
      <form-property prefix="record" name="view_code" type="string" size="20" cannull="false" description="视图代码"/>
      <form-property prefix="record" name="max_records" type="int" cannull="false" description="最大记录数"/>
      <form-property prefix="record" name="view_type" type="string" size="10" cannull="false" description="视图类型"/>
      <form-property prefix="record" name="hasConfig" 		type="string" size="10" cannull="true" description="是否配置视图"/>
      <form-property prefix="record" name="oper" 		type="string" size="10" cannull="true" description="操作"/>
      
      <!-- 主题字段信息 -->
      <form-property prefix="record" name="dczd_mc" type="string" size="150" cannull="false" description="调查制度名称"/>
      <form-property prefix="record" name="dczd_cjm" type="string" size="100" cannull="true" description="调查制度层级码"/>
      <form-property prefix="record" name="dczd_fjd" type="string" size="4" cannull="true" description="调查制度父节点代码"/>
      <form-property prefix="record" name="dczd_cc" type="string" size="2" cannull="true" description="调查制度所在层次"/>
      <form-property prefix="record" name="dczd_ms" type="string" size="225" cannull="true" description="调查制度描述"/>
      <form-property prefix="record" name="dczd_sx" type="int" cannull="true" description="显示顺序"/>
      <form-property prefix="record" name="dczd_mx" type="string" size="1" cannull="true" description="是否明细"/>
      <form-property prefix="record" name="expand" type="string" size="5" cannull="true" description="是否展开"/>
      
      <!-- 数据表信息 -->
      <form-property prefix="record" name="table_name_cn" type="string" size="100" cannull="false" description="业务表中文名"/>
      <form-property prefix="record" name="table_name" type="string" size="100" cannull="false" description="业务表名"/>
      
      <!-- 数据表字段信息 -->

      <form-property prefix="record" name="column_en" type="string" size="60" cannull="false" description="业务字段名"/>
      <form-property prefix="record" name="column_cn" type="string" size="100" cannull="false" description="业务字段中文名"/>
      
      <!-- 系统主题信息 -->
      <form-property prefix="record" name="sys_id" type="string" size="32" cannull="false" description="系统ID"/>
      <form-property prefix="record" name="sys_no" type="string" size="10" cannull="false" description="系统编码"/>
      <form-property prefix="record" name="sys_name" type="string" size="100" cannull="false" description="系统名称"/>
      
      <form-property prefix="record" name="view_order" type="string" size="100" cannull="false" description="视图代码"/>
    </form-bean>

    <form-bean name="SysDbViewUpdateForm">
      <description>单记录处理：查询、修改、增加</description>
      <form-property prefix="select-key" name="view_name" type="string" size="20" description="数据库视图名称"/>
      <form-property prefix="select-key" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="record" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="record" name="view_name" type="string" size="20" cannull="false" description="数据库视图名称"/>
      <form-property prefix="record" name="dczd_dm" type="string" size="4" cannull="false" description="主题代码"/>
      <form-property prefix="record" name="table_no" type="string" size="2000" cannull="false" description="数据表编码"/>
      <form-property prefix="record" name="column_no" type="string" size="2000" cannull="true" description="字段编码"/>
      <form-property prefix="record" name="column_cn" type="string" size="4000" cannull="true" description="字段编码"/>
      <form-property prefix="record" name="column_en" type="string" size="4000" cannull="true" description="字段编码"/>
      <form-property prefix="record" name="create_date" type="string" size="10" cannull="false" description="创建日期"/>
      <form-property prefix="record" name="create_by" type="string" size="32" cannull="false" description="创建人"/>
      <form-property prefix="record" name="param_columns" type="string" size="2000" cannull="true" description="参数自段"/>
      <form-property prefix="record" name="view_desc" type="string" size="1000" cannull="true" description="备注"/>
      <form-property prefix="record" name="view_code" type="string" size="20" cannull="false" description="视图代码"/>
      <form-property prefix="record" name="max_records" type="int" cannull="false" description="最大记录数"/>
      <form-property prefix="record" name="view_type" type="string" size="10" cannull="false" description="视图类型"/>
      
      <form-property prefix="record" name="params" type="string" size="2000" cannull="false" description="表连接条件"/>
      
	  <form-property prefix="view-service" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="view-service" name="view_name" type="string" size="20" cannull="false" description="数据库视图名称"/>
      <form-property prefix="view-service" name="dczd_dm" type="string" size="4" cannull="false" description="主题代码"/>
      <form-property prefix="view-service" name="table_no" type="string" size="2000" cannull="false" description="数据表编码"/>
      <form-property prefix="view-service" name="column_no" type="string" size="2000" cannull="true" description="字段编码"/>
      <form-property prefix="view-service" name="create_date" type="string" size="10" cannull="false" description="创建日期"/>
      <form-property prefix="view-service" name="create_by" type="string" size="32" cannull="false" description="创建人"/>
      <form-property prefix="view-service" name="param_columns" type="string" size="2000" cannull="true" description="参数自段"/>
      <form-property prefix="view-service" name="view_desc" type="string" size="1000" cannull="true" description="备注"/>
      <form-property prefix="view-service" name="view_code" type="string" size="20" cannull="false" description="视图代码"/>
      <form-property prefix="view-service" name="max_records" type="int" cannull="false" description="最大记录数"/>
      <form-property prefix="view-service" name="view_type" type="string" size="10" cannull="false" description="视图类型"/>
      
      <!-- 字段相关 -->
      <form-property prefix="column-info"     name="column_no" 	    type="string" size="2000" cannull="true"  description="字段编码"/>
      <form-property prefix="column-info"     name="column_name"    type="string" size="60"   cannull="false" description="业务字段名"/>
      <form-property prefix="column-info"     name="column_name_cn" type="string" size="100"  cannull="false" description="业务字段中文名"/>
      <form-property prefix="column-info"     name="column_byname"  type="string" size="100"  cannull="false" description="业务字段别名"/>
      <form-property prefix="column-info"     name="table_no" 	    type="string" size="2000" cannull="true"  description="数据表编号"/>
      <form-property prefix="column-info"     name="table_name" 	type="string" size="2000" cannull="true"  description="数据表名称"/>
      <form-property prefix="column-info"     name="table_name_cn" type="string" size="100"  cannull="false" description="业务表中文名"/>
      
      <!-- 数据表相关 -->

      <form-property prefix="table-info"     name="table_no" 	  type="string" size="2000" cannull="true"  description="数据表编号"/>
      <form-property prefix="table-info"     name="table_name"    type="string" size="60"   cannull="false" description="业务表名"/>
      <form-property prefix="table-info"     name="table_name_cn" type="string" size="100"  cannull="false" description="业务表中文名"/>
      <form-property prefix="table-info"     name="sys_id" 	  	  type="string" size="2000" cannull="true"  description="主题编号"/>
      <form-property prefix="table-info" 	 name="sys_no" 		  type="string" size="10" cannull="false" description="系统编码"/>
      <form-property prefix="table-info" 	 name="sys_name"      type="string" size="100" cannull="false" description="系统名称"/>
      
    </form-bean>

    <form-bean name="SysDbViewDeleteForm">
      <description>多记录和单记录删除</description>
      <form-property prefix="primary-key" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="primary-key" name="view_name" type="string" size="32" cannull="false" description="数据库视图名称"/>
    </form-bean>
    
    <!-- 数据库视图参数 -->
    <form-bean name="SysDbViewParamForm">
      <description>多记录查询</description>
      <form-property prefix="primary-key" name="sys_db_view_param_id" type="string" size="32" cannull="false" description="数据库视图表连接编号"/>
	  <form-property prefix="primary-key" name="sys_db_view_id" type="string" size="32" description="数据库视图编号"/>
      <form-property prefix="select-key" name="sys_db_view_id" type="string" size="32" description="数据库视图编号"/>
      <form-property prefix="record" name="sys_db_view_param_id" type="string" size="32" cannull="false" description="数据库视图表连接编号"/>
      <form-property prefix="record" name="sys_db_view_id" type="string" size="32" cannull="false" description="数据库视图编号"/>
      <form-property prefix="record" name="operator1" type="string" size="10" cannull="true" description="连接符1"/>
      <form-property prefix="record" name="left_paren" type="string" size="5" cannull="true" description="左括号"/>
      <form-property prefix="record" name="left_table_no" type="string" size="32" cannull="false" description="左表"/>
      <form-property prefix="record" name="left_table_name" type="string" size="32" cannull="false" description="左表英文名"/>
  	  <form-property prefix="record" name="left_table_name_cn" type="string" size="32" cannull="false" description="左表中文名"/>
      <form-property prefix="record" name="left_column_no" type="string" size="32" cannull="false" description="左字段"/>
      <form-property prefix="record" name="left_column_name" type="string" size="32" cannull="false" description="左字段英文名"/>
  	  <form-property prefix="record" name="left_column_name_cn" type="string" size="32" cannull="false" description="左字段中文名"/>
      <form-property prefix="record" name="operator2" type="string" size="5" cannull="false" description="连接符2"/>
      <form-property prefix="record" name="right_table_no" type="string" size="32" cannull="false" description="右表"/>
      <form-property prefix="record" name="right_table_name" type="string" size="32" cannull="false" description="右表英文名"/>
  	  <form-property prefix="record" name="right_table_name_cn" type="string" size="32" cannull="false" description="右表中文名"/>
      <form-property prefix="record" name="right_column_no" type="string" size="32" cannull="false" description="右字段"/>
      <form-property prefix="record" name="right_column_name" type="string" size="32" cannull="false" description="右字段英文名"/>
  	  <form-property prefix="record" name="right_column_name_cn" type="string" size="32" cannull="false" description="右字段中文名"/>
      <form-property prefix="record" name="right_paren" type="string" size="5" cannull="true" description="右括号"/>
    </form-bean>
  </form-beans>

  <action-mappings>
    <action input="query-sys_db_view.jsp" name="SysDbViewRowsetForm" txn-code="52102001" check-type="check" container="default" txn-type="transaction" re-entry="true" log-flag="true">
      <description>查询数据库视图列表</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102001" input-node="select-key" output-node="record" description="查询数据库视图列表"/>
      <forward error-code="success" path="query-sys_db_view.jsp"/>
      <forward error-code="failure" path="query-sys_db_view.jsp"/>
    </action>

    <action input="update-sys_db_view.jsp" name="SysDbViewUpdateForm" txn-code="52102002" check-type="check" container="default" txn-type="transaction" re-entry="false" log-flag="true">
      <description>修改数据库视图信息</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102002" input-node="record" description="修改数据库视图信息"/>
      <forward error-code="success" path="update-sys_db_view.jsp"/>
      <forward error-code="failure" path="update-sys_db_view.jsp"/>
    </action>

    <action input="insert-sys_db_view.jsp" name="SysDbViewUpdateForm" txn-code="52102003" check-type="check" container="default" txn-type="transaction" re-entry="false" log-flag="true">
      <description>增加数据库视图信息</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102003" input-node="record" description="增加数据库视图信息"/>
      <forward error-code="success" path="insert-sys_db_view.jsp"/>
      <forward error-code="failure" path="insert-sys_db_view.jsp"/>
    </action>

    <action input="query-sys_db_view.jsp" name="SysDbViewUpdateForm" txn-code="52102004" check-type="check" container="default" txn-type="transaction" re-entry="true" log-flag="true">
      <description>查询数据库视图用于修改</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102004" input-node="select-key" output-node="record" description="查询数据库视图用于修改"/>
      <forward error-code="success" path="update-sys_db_view.jsp"/>
      <forward error-code="failure" path="update-sys_db_view.jsp"/>
    </action>

    <action input="query-sys_db_view.jsp" name="SysDbViewDeleteForm" txn-code="52102005" check-type="check" container="default" txn-type="transaction" re-entry="false" log-flag="true">
      <description>删除数据库视图信息</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102005" input-node="primary-key" description="删除数据库视图信息"/>
      <forward error-code="success" path="/script/deletesuccess.jsp"/>
      <forward error-code="failure" path="/script/deletefailure.jsp"/>
    </action>

    <action input="query-sys_db_view.jsp" name="SysDbViewRowsetForm" txn-code="52102006" check-type="check" container="default" txn-type="transaction" re-entry="false" log-flag="false">
      <description>校验视图是否能被修改或删除</description>
      <step index="10" bean-name="com.gwssi.dw.runmgr.db.txn.TxnSysDbView" func-name="txn52102006" input-node="select-key" output-node="record" description="校验视图是否能被修改或删除"/>
      <forward error-code="success" path="/script/deletesuccess.jsp"/>
      <forward error-code="failure" path="/script/deletefailure.jsp"/>
    </action> 

  </action-mappings>
</struts-config>

