<!DOCTYPE html PUBLIC>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="../jazz-ui.js" type="text/javascript"></script> 
<script>
	function queryData(){
//		var formvalue = $('div[name="querycondition"]').formpanel('getValue');
//alert('formvalue=='+jazz.jsonToString(formvalue));
		//$('div[name="gridpanel"]').gridpanel('option', 'dataurlparams', formvalue);
		$('div[name="gridpanel"]').gridpanel('option', 'dataurlparams', formvalue);
       	$('div[name="gridpanel"]').gridpanel('query', ['formpanel']);
	}
	
    function reset(){
    	$("div[name='formpanel']").formpanel('reset');
    }
    
    function hideColumn(){
    	$('div[name="gridpanel"]').gridpanel('hideColumn', 'sex');
    }
    function showColumn(){
    	$('div[name="gridpanel"]').gridpanel('showColumn', 'sex');
    }
    function callcustom(){
    	alert(234);
    }
    function customsizeColumn(rowData,columnname,lineno){
    	var htm = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+rowData["name"]+'</a></div>';
    	return htm;
    }
    function updateRow(){
    	var data = {"id":"738a411521d54d36837f2d68bd2488c3","birthday":"","resume":"","sex":"","age":"1231","name":"lihuayun","hobby":"","origin":"","org":"","photo":"","password":""};
    	$('div[name="gridpanel"]').gridpanel('updateRow', data,3);
    }
    function changeview1(){
    	$('div[name="gridpanel"]').gridpanel('showView', 'table');
    }
    function changeview2(){
    	$('div[name="gridpanel"]').gridpanel('showView', 'card');
    }
    function cardclick(event,data){
    	alert(jazz.jsonToString(data));
    }
    function loadDataFinished(data){
    	alert(jazz.jsonToString(data));
    }
    function changeHeader(){
    	
    	//先销毁gridpanel
		$('div[name="gridpanel"]').gridpanel('destroyComp');
    	
    	var a = 
    		'<div>'+ 
				'<div name="id" key="true" visible="false"  rowspan="2"></div>'+
				'<div text="基本信息" textalign="center" colspan="2"></div>'+
				'<div text="高级信息" textalign="center" colspan="3"></div>'+
				'<div name="custom" text="自定义" textalign="center" rowspan="2" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl="" width="150px" columnrender="customsizeColumn()"></div>'+
			'</div>'+
			'<div>'+
				'<div name="name"  text="姓名" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl='+'[{"text":"男","value":"1"},{"text":"女","value":"2"}]'+' width="200px"></div>'+
				'<div name="sex" text="性别" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl="/JAZZ/dictionary/queryData.do?dicId=sex" width="150px"></div>'+
				'<div name="age" text="年龄" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl="[{"text":"男","value":"1"},{"text":"女","value":"2"}]" width="150px"></div>'+
				'<div name="org" text="所属机构" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl="/JAZZ/dictionary/queryData.do?dicId=org" width="150px"></div>'+
				'<div name="birthday" text="出生日期" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl="" width="150px"></div>'+
			'</div>'
		
		
		$('div[name="grid_column"]').children().remove();
		$('div[name="grid_column"]').append(a);
		
		//根据options重新创建gridpanel
    	$('div[name="gridpanel"]').parseComponent();
    }
  	//数据加载完成回调
    function dataload(data){
    	alert(jazz.jsonToString(data));
    }
  	//数据渲染函数
    function renderdata(data){
		for(var i=0;i<data.length;i++){
			data[i]["@toolsopration"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+data[i]["name"]+'</a></div>';
			data[i]["custom"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+data[i]["name"]+'</a></div>';
		}
		return data;
    }
  	//行数据渲染函数
    function renderrow(data, rowElement){
    	//$(rowElement[0]).css("background","red");
	}
</script>
</head>
<body>

<div vtype="gridpanel" name="gridpanel" height="400" width="700"  dataloadcomplete="" datarender="renderdata()" 
	titleDisplay="true" title="查询结果" dataurl="reg.json" isshowselecthelper="true" selecttype="2">
	<!-- <div name="toolbar" vtype="toolbar">
		<div name="add_button" vtype="button" text="新增" click="changeview1()"></div>
		<div name="update_button" vtype="button" text="修改"  click="updateRow()"></div>
    	<div name="delete_button" vtype="button" text="删除" click="changeview2()"></div>
    </div> -->
	<!-- 表头（多级表头） -->
	<div vtype="gridcolumn" name="grid_column" >
		<div> <!-- 第1行 -->
			<div name="id" key="true" visible="false"  rowspan='2'></div>
			<div text="基本信息" textalign="center" colspan="2"></div>
			<div text="高级信息" textalign="center" colspan="3"></div>
			<div name="custom" text="自定义" textalign="center" rowspan='2' width="100px"></div>
		</div>
		<div> <!-- 第2行 -->
			<div name="name"  text="姓名" textalign="center" sort="true" width="150px"></div>
			<div name="sex" text="性别" textalign="center" sort="true" dataurl='[{"text":"男","value":"1"},{"text":"女","value":"2"}]' width="50px"></div>
			<div name="age" text="年龄" textalign="center" width="50px"></div>
			<div name="org" text="所属机构" textalign="center" dataurl="/JAZZ/dictionary/queryData.do?dicId=org" width="100px"></div>
			<div name="birthday" text="出生日期" textalign="center" datatype="date" dataformat="" width="150px"></div>
		</div>
	</div>
	<!-- 表格 -->
	<div vtype="gridtable" name="grid_table"></div>
	<!-- 分页 -->
<!-- 	<div vtype="paginator" name="grid_paginator" theme="2" pagerows="10"></div> -->
</div>

</body>
</html>