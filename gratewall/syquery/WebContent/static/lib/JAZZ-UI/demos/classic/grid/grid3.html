<!DOCTYPE html PUBLIC>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../../../lib/themes/default/jazz-all.css" rel="stylesheet" type="text/css" />

<script src="../../../external/jquery-1.8.3.js" type="text/javascript"></script>
<script src="../../../external/jquery-ui-1.9.2.custom.js" type="text/javascript"></script>
<script src="../../../lib/jazz-dependent.js" type="text/javascript"></script>
<script src="../../../lib/jazz-all.js" type="text/javascript"></script>

<script>
	function query(){
	//alert("1");
//		var formvalue = $('div[name="querycondition"]').formpanel('getValue');
//alert('formvalue=='+jazz.jsonToString(formvalue));
		//$('div[name="gridpanel"]').gridpanel('option', 'dataurlparams', formvalue);

       	$('div[name="gridpanel"]').gridpanel('query', ['formpanel']);
	}
	
    function reset(){
    	$("div[name='formpanel']").formpanel('reset');
    }
    
    function hideColumn(){
    	$('div[name="gridpanel"]').gridpanel('hideColumn', 'id');
    }
    function showColumn(){
    	$('div[name="gridpanel"]').gridpanel('showColumn', 'id');
    }
    function callcustom(){
    	alert(234);
    }
    
    function changeview1(){
    	$('div[name="gridpanel"]').gridpanel('showView', 'table');
    }
    function changeview2(){
    	$('div[name="gridpanel"]').gridpanel('showView', 'card');
    }
    
    function add(){
    	var data = [{"id":"8888888888888888","birthday":"2014-08-30","resume":"aaa","sex":"1","age":"88","name":"九把刀1","hobby":"球","origin":"","org":"1","photo":"","password":"ssss"},
    	            {"id":"9999999999999999999","birthday":"2014-08-30","resume":"aaa","sex":"1","age":"88","name":"九把刀2","hobby":"球","origin":"","org":"1","photo":"","password":"ssss"}];
    	$('div[name="gridpanel"]').gridpanel('addRow', data);
    }  
    function updateRow(){
    	var data = {"id":"9999999999999999999","birthday":"2014-08-30","resume":"aaa","sex":"1","age":"88","name":"九把刀","hobby":"球","origin":"","org":"1","photo":"","password":"ssss"};
    	$('div[name="gridpanel"]').gridpanel('updateRowById', data , "21e98ac756194829b4a52dcc2fa580d0");
    }
    function getAllData(){
    	var data = $('div[name="gridpanel"]').gridpanel('getAllData');
    	alert(data.length+"====="+jazz.jsonToString(data));
    }
    function getRow(rowIndex){
    	var data = $('div[name="gridpanel"]').gridpanel('getRow',0);
    	alert("====="+jazz.jsonToString(data));
    }
    function getRowLength(){
    	var data = $('div[name="gridpanel"]').gridpanel('getRowLength');
    	alert("====="+data);
    }
    function getSelection(){
    	var data = $('div[name="gridpanel"]').gridpanel('getSelection');
    	alert("====="+jazz.jsonToString(data));
    }
    function remove(){
    	var data = $('div[name="gridpanel"]').gridpanel('getSelection');
    	for(var i=0;i<data.length;i++){
    		var rowuuid = data[i]["id"];
    		$('div[name="gridpanel"]').gridpanel('removeRowById',rowuuid);
    	}
    }
    function removeRow(rowIndex){
    	$('div[name="gridpanel"]').gridpanel('removeRowByIndex',2);
    }
    function removeRowById(id){
    	$('div[name="gridpanel"]').gridpanel('removeRowById','21e98ac756194829b4a52dcc2fa580d0');
    }
    function selectRow(id){
    	$('div[name="gridpanel"]').gridpanel('selectRow','21e98ac756194829b4a52dcc2fa580d0');
    }
    function unselectRow(id){
    	$('div[name="gridpanel"]').gridpanel('unselectRow','21e98ac756194829b4a52dcc2fa580d0');
    }
    function selectAllRows(){
    	$('div[name="gridpanel"]').gridpanel('selectAllRows');
    }
    function unselectAllRows(){
    	$('div[name="gridpanel"]').gridpanel('unselectAllRows');
    }
    function reload(){
    	
    	//var a= {"name":"zblist0","vtype":"gridpanel","data":{"rows":[{"zbjs":"","zbmc":"","bbh":"","cjsj":"","xsws":"","sfml":"","jldwid":"","type":"","cjrid":"","ztid":"","bgtid":"0b3e8b16dc2b4fe4bc943e7050c6e075","zbmlbm":"","id":"ed59cd1aeab641caa2a2dbe3b6111e9c","stid":"","tb":"","fjdid":"","mc":"载客汽车-客运车辆数","sjlxmc":"","bm":"","zt":"","jldwmc":"","xgrid":"","sz":"500","sx":"","objid":"","zbsjlx":"","hzlx":"","zyid":"","sjlx":"","hb":"","bgq":"2014年7月","zbsjb":"","jc":"","yxbj":"","flag":"","sfjm":"","jd":"","bgqb":"","bgtlx":"","zbbm":"","zbmlmc":"","dwid":"","tbsm":"","yylx":"","nm":""},{"zbjs":"","zbmc":"","bbh":"","cjsj":"","xsws":"","sfml":"","jldwid":"","type":"","cjrid":"","ztid":"","bgtid":"679c0febd50742b79fe9a04129672a53","zbmlbm":"","id":"ed59cd1aeab641caa2a2dbe3b6111e9c","stid":"","tb":"","fjdid":"","mc":"载客汽车-客运车辆数","sjlxmc":"","bm":"","zt":"","jldwmc":"","xgrid":"","sz":"500","sx":"","objid":"","zbsjlx":"","hzlx":"","zyid":"","sjlx":"","hb":"","bgq":"2014年7月","zbsjb":"","jc":"","yxbj":"","flag":"","sfjm":"","jd":"","bgqb":"","bgtlx":"","zbbm":"","zbmlmc":"","dwid":"","tbsm":"","yylx":"","nm":""}]}}
    	var a = {"data":{"page":1,"pagerows":30,"rows":[],"totalrows":92},"name":"gridpanel","vtype":"gridpanel"};
    	$('div[name="gridpanel"]').gridpanel('reload',a);
    	//var data = $('div[name="gridpanel"]').gridpanel('getRow',0);
    	//alert("====="+jazz.jsonToString(data));
    }
    function reloadCurrentPage(){
    	$('div[name="gridpanel"]').gridpanel('reloadCurrentPage');
    }
    function removeThenReload(){
    	/* var data = $('div[name="gridpanel"]').gridpanel('getSelection');
    	for(var i=0,len=data.length;i<len;i++){
    		var id = data[i]["id"];
    		$('div[name="gridpanel"]').gridpanel('removeRowById',id);
    	} */
    	$('div[name="gridpanel"]').gridpanel('reloadCurrentPage');
    }
    
    $(function(){
    	var options = {
        		vtype: 'gridpanel',
        		name: "gridpanel",
        		width: "1000px",
        		height: "500px",
        		showborder:true,
        		//height: "100%",
        		//layout: "fit",
        		title: "查询结果",
        		titledisplay: false,
        		lineno: "true",
        		linenowidth: "30px",
        		isshowselecthelper: true,//是否显示复选框和单选框
        		selecttype: "2",//选中类型
        		rowselectable: false,
        		linetype: 1,
        		linestyle: 2,
        		dataurl: "regeditor.json",
        		dataurlparam: null,
        		defaultview: "table",
        		isshowtoolbar: true,
        		isshowpaginator: true,
        		datarender: function(event,obj){
        			var data = obj.data;
        			for(var i=0;i<data.length;i++){
        				data[i]["@toolsopration"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+data[i]["name"]+'</a></div>';
        				data[i]["custom"] = '<div class="jazz-grid-cell-inner"><a href="javascript:void(0);" onclick="callcustom()">'+i+'==='+data[i]["name"]+'</a></div>';
        			}
        			return data;
        		},
                dataloadcomplete: function(event,data){
                	alert(jazz.jsonToString(data));
                },
                items:[{
                	vtype: "toolbar",
                	name: "toolbar",
                	items:[{
                		vtype: "button",
                		name: "add_button",
                		text: "新增",
                		click: function(e,data,obj){
                			alert(jazz.jsonToString(data));
                		}
                	},{
                		vtype: "button",
                		name: "update_button",
                		text: "修改",
                		click: "changeview1()"
                	},{
                		vtype: "button",
                		name: "delete_button",
                		text: "删除",
                		click: "changeview2()"
                	}]
                } , {
                	vtype: "gridcolumn",
                	name: "gridcolumn",
                	hideheader: false,
                	wordbreak: true,
                	resizecolumn: true,//是否可调整列宽
                	content: '<div>'+ 
    				    			'<div name="id" key="true" visible="false"  rowspan="2"></div>'+
    				    			'<div text="基本信息" textalign="center" colspan="2"></div>'+
    				    			'<div text="高级信息" textalign="center" colspan="3"></div>'+
    				    			'<div name="custom" text="自定义" textalign="center" rowspan="2" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl="" width="20%"></div>'+ // columnrender="customsizeColumn()"
    				    		'</div>'+
    				    		'<div>'+
    				    			'<div name="name"  text="姓名阿斯顿发送到发送到发四大发送到法师打发斯蒂芬" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" width="20%"></div>'+
    				    			'<div name="sex" text="性别" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl='+'[{"text":"男","value":"1"},{"text":"女","value":"2"}]'+' width="10%"></div>'+
    				    			'<div name="age" text="年龄" textalign="center" datatype="" dataformat="" textdisplaytype="" width="15%"></div>'+
    				    			'<div name="org" text="所属机构" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl="/JAZZ/dictionary/queryData.do?dicId=org" width="15%"></div>'+
    				    			'<div name="birthday" text="出生日期" textalign="center" datatype="date" dataformat="yyyy-MM-dd" textdisplaytype="" dataurl="" width="15%"></div>'+
    				    		'</div>'
                }, {
                	vtype: "gridtable",
                	name: "grid_table",
                	isfixrow: true,//当数据条数小于pagerows时，是否补充空行
                	rowrender: function(event,rows){
                		 var data = rows.data;
                		 var rowElements = rows.rowEl;
                		//行循环
                		 $.each(rowElements,function(i,trobj){
                			 //列循环
                			var h1="",h7="",tdtemp=null;
                			$.each($(trobj).children(),function(j,tdobj){
                				//tdobj就是该行其中的一个单元格
                				if(j==1){
	                				h1 = $(tdobj).find(".jazz-grid-cell-inner").html();
                				}
                				if(j==7){
	                				h7 = $(tdobj).find(".jazz-grid-cell-inner").html();
	                				tdtemp = $(tdobj);
                				}
                    		});
                			$(tdtemp).html(h7+"@@@@@@"+h1)
                		}); 
                	},
                	rowselect: function(event,data){
                		//alert(jazz.jsonToString(data));
                	},
                	rowunselect: null,
                	rowdblclick: function(event,data){
                		//alert(jazz.jsonToString(data));
                	}
                }, {
                	vtype: "gridcard",
                	name: "grid_card",
                	isaddcard: true,
                	/* width: "160px",
                	height: "70px",
                	margin: "10px",
                	cardclass: "", */
                	html: function(data){
		        		var html = '<div style="width:100%;height:100%">'
		        			+ '<div class="jazz-grid-cardcell-i"><div class="jazz-grid-bblb-img"></div></div>'
		        			+ '<div class="jazz-grid-qh-c jazz-grid-bblb-c">'
		        			+ '<div class="jazz-grid-qh-c-h1">'+ data.name +'</div>'
		        			+ '<div class="jazz-grid-qh-c-h2">'+ data.org +'</div>'
		               	 	+ '<div class="jazz-grid-qh-c-date">' + data.birthday + '</div>'
		               	 	+ '<div class="jazz-grid-cardcell-title" style="display:none;">'+ data.name +'</div>'
		                	+ '</div></div>';
			        	return html;
			        },
			        /*addcardrender: function(){
			        	 var addcard = '<div class="jazz-grid-cardcell jazz-grid-qh-cardcell" style="width:205px;height:90px;margin:10px;"><div class="jazz-card-new" style="height:90px;"></div></div>';
			            return addcard; 
			        },*/
			        addcardclick: function(){
			        	alert("add cardclick");
			        },
                	cardselect: function(event,data){
                		alert(jazz.jsonToString(data));
                	},
                	cardunselect: null,
                	carddblclick: function(event,data){
                		alert(jazz.jsonToString(data));
                	}
                } ,{
                	vtype: "paginator",
                	name: "grid_paginator",
                	theme: "2",
                	pagerows: 30
                } ]
        	};
    	//var aa = jazz.widget(options);
    	//aa.layout({layout: 'fit'});
    	$("#aaa").gridpanel(options);
    	
    });
</script>
</head>
<body>


<!-- 
<div vtype="gridpanel" name="gridpanel" height="400" width="1000" 
titleDisplay="true" title="查询结果" dataurl="/JAZZ/demo/queryUser.do" isshowselecthelper="true" selecttype="2">
	<div name="toolbar" vtype="toolbar">
		<div name="add_button" vtype="button" text="新增" click="changeview1()"></div>
		<div name="update_button" vtype="button" text="修改"  click="updateRow()"></div>
    	<div name="delete_button" vtype="button" text="删除" click="changeview2()"></div>
    </div>
	
	<div vtype="gridcolumn" name="grid_column" >
		<div>
			<div name="id" key="true" visible="false"  rowspan='2'></div>
			<div text="基本信息" textalign="center" colspan="2"></div>
			<div text="高级信息" textalign="center" colspan="3"></div>
			<div name="custom" text="自定义" textalign="center" rowspan='2' sort="true" datatype="" dataformat="" textdisplaytype="" dataurl='' width="150px" columnrender="customsizeColumn()"></div>
		</div>
		<div>
			<div name="name"  text="姓名" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl='[{"text":"男","value":"1"},{"text":"女","value":"2"}]' width="200px"></div>
			<div name="sex" text="性别" textalign="center" sort="true" datatype="" dataformat="" textdisplaytype="" dataurl="/JAZZ/dictionary/queryDictionaryData.do?dicId=sex" width="150px"></div>
			<div name="age" text="年龄" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl='[{"text":"男","value":"1"},{"text":"女","value":"2"}]' width="150px"></div>
			<div name="org" text="所属机构" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl="/JAZZ/dictionary/queryDictionaryData.do?dicId=org" width="150px"></div>
			<div name="birthday" text="出生日期" textalign="center" datatype="" dataformat="" textdisplaytype="" dataurl='' width="150px"></div>
		</div>
	</div>
	<div vtype="gridtable" name="grid_table"></div>
	<div vtype="gridcard" name="grid_card"></div>
	<div vtype="paginator" name="grid_paginator" theme="4" tablename="grid_table"></div>
</div>
 -->
<!-- <div id="aaa" ></div>  -->
<div id="aaa" ></div>
</body>
</html>