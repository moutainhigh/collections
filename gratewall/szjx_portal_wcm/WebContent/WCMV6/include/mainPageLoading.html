<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title> new document </title>
<script language="javascript" src="../js/opensource/prototype.js" type="text/javascript"></script>
<script language="javascript" src="../js/opensource/animator.js" type="text/javascript"></script>
<style type="text/css">
.coverall_iframe{
	position:absolute;
	top:0px;
	left:0px;
	width:100%;
	height:100%;
	-moz-opacity:0.5;
	opacity:0.5;
	filter:alpha(opacity=100);
	filter:		progid:DXImageTransform.Microsoft.Gradient(EndColorStr=#DEDCDD, StartColorStr=#ffffff, GradientType=0);
}
body{
	padding: 0;
	margin: 0;
	overflow: hidden;
	background-color: transparent
}
table{
	font-size: 12px;
}
</style>
<script language="javascript">
<!--
	var TOTLE_STEPS = 8;
	var m_nCurrentSteps = 0;
	var m_bCompleted = false;
	var m_bFirstStep = true;
	function loadingStat(){ //just a mock
		var nSeed = Math.random();
		var nSteps = Math.ceil((nSeed * 10) % 3);
		if(m_nCurrentSteps + nSteps >= TOTLE_STEPS) {
			nSteps = TOTLE_STEPS - m_nCurrentSteps;
			m_bCompleted = true;
		}

		var sHtml = '';
		for (var i = 0; i < nSteps; i++){
			m_nCurrentSteps++;
		}
		$('divLoadingStatus').style.width = (m_nCurrentSteps * 35);
		//alert(sHtml)
		if(m_bCompleted) {
			$('divLoadingStatus').style.width = '100%';
			return; // 就此结束
		}
		window.setTimeout(loadingStat, nSteps * 1000);
		//第一次加载，开始变换Loading提示
		if(m_bFirstStep) {
			m_bFirstStep = false;
			window.setTimeout(changeInfo, 1000);
		}
	}
	function forceComplete(){
		$('divLoadingStatus').style.width = '100%';
		m_bCompleted = true;
	}
	var ALERTIONS = [
		'正在加载，请稍候...', 
		'TRSWCM-V6，内容管理新篇章',
		'开启WEB2.0应用新征程',
		'TRS—搜索、整合、发现',
		'加载完成     .'
	];
	var m_nCurrentIndex = 0;
	function changeInfo(){
		$('tdAlertion').innerHTML = ALERTIONS[m_nCurrentIndex];
		m_nCurrentIndex++;
		if(m_nCurrentIndex == 4) {
			m_nCurrentIndex = 0;
		}
		if(m_bCompleted) {
			$('tdAlertion').innerHTML = ALERTIONS[4];
			return; // 就此结束
		}
		$('tdAlertion').innerHTML = ALERTIONS[m_nCurrentIndex];
		window.setTimeout(changeInfo, 2000);
	}	
//-->
</script>
</head>
<body>
<div id="divLoadingMask" class="coverall_iframe" style="display: none; z-index: 999">
	<div style="position: absolute; border:1px silver solid; 30px;z-index: 999;" id="divRotatingBar">
	<table width="501" height="195" border="0" align="center" cellpadding="0" cellspacing="0">
		<tr>
			<td valign="top" background="../images/pageloading/loading-bg.gif">
				<table width="501" border="0" cellspacing="0" cellpadding="8">
					<tr>
						<td style="font-size: 14px; font-family: Georgia; padding: 10px;" id="tdAlertion">
							<!--<img src="../images/pageloading/text.gif" width="309" height="23" />-->
							正在加载，请稍候...
						</td>
					</tr>
				</table>
				<br/>
				<br/>
				<table width="285" border="0" align="center" cellpadding="0" cellspacing="0">
					<tr>
						<td width="285" height="35" align="center" valign="middle" background="../images/pageloading/jindutiao.gif">
							<table width="90%" height="16px" border="0" cellpadding="0" cellspacing="0" style="height: 16px;">
								<tr>
									<td align="left" style="padding-top: 0px; height: 16px; width: 100%; padding-right: 2px;">
									<div id="divLoadingStatus" style="background: url(../images/pageloading/middle.gif); width: 10px;">
										&nbsp;
									</div>
									</td>
								</tr>
							</table>		
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
	</div>
</div>
<script language="javascript">
<!--
Element.show('divLoadingMask');
var dim = Element.getDimensions('divLoadingMask')
$('divRotatingBar').style.left = (dim.width - 505)/2;
$('divRotatingBar').style.top  = (dim.height)/2 - 150;


window.loadingExp = new Animator({
	duration: 500,
	onComplete: function(){
		//document.body.removeChild($('divTest'));
		Element.hide($('divLoadingMask'));
		Element.hide(top.frmLoadingMask);
		top.m_bMainPageLoadingClear = true;
	}
}).addSubject(new NumericalStyleSubject($("divLoadingMask"), 'opacity', 1, 0.0));

window.hideLoadingPage = function(){
	forceComplete();
	setTimeout(function(){
		window.loadingExp.toggle();
	}, 500);
}
loadingStat();
//-->
</script>

</body>
</html>
