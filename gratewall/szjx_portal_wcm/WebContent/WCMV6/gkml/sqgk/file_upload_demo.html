<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
            "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title> appendix demo </title>
	<!-- 组件依赖的代码 BEGIN -->
	<script language="javascript" src="../../../app/application/core/core.js" type="text/javascript"></script>
	<script language="javascript" src="../../../app/application/core/com.trs.util/Observable.js" type="text/javascript"></script>
	<script language="javascript" src="../../../app/application/core/com.trs.ui/BaseComponent.js" type="text/javascript"></script>
	<!-- 组件依赖的代码 END -->
	<script language="javascript" src="../../../app/application/core/com.trs.ui/appendix/YUIConnection.js" type="text/javascript"></script>
	<script language="javascript" src="../../../app/application/core/com.trs.ui/appendix/XAppendix.js" type="text/javascript"></script>
	<link href="../../../app/application/core/com.trs.ui/appendix/resource/XAppendix.css" rel="stylesheet" type="text/css" />	

	<style type="text/css">
		*{
			font-size:12px;
		}
		.row{
			clear:both;
		}
		.label{
			float:left;
			text-align:right;
			width:80px;
		}
		.value{
			margin-left:85px;
		}
	</style>
</head>

<body>
<div class="row">
	<div id="UploadInfo" style="font-size:18pt;color:red;margin-bottom:10px"></div>
	<div class="label" WCMAnt:param="XAppendix.html.fieldone">附件字段1：</div>
	<div class="value">
		<script language="javascript">
		<!--
			var obj = new com.trs.ui.XAppendix({
				name : 'appendix1',
				pathFlag : 'U0'
			});
			
			var lStartTime = 0, lEndTime = 0;
			obj.addListener("beforeupload", function(){
				lStartTime = new Date().getTime();				
			});

	
			obj.addListener("upload", function(_oResult){
				lEndTime = new Date().getTime();
				var lUseTime = (lEndTime - lStartTime);
				var sInfo = "本次上传速度为："+ Math.floor((_oResult["Size"]/lUseTime),5) + "KBps";
				$("UploadInfo").innerHTML = sInfo;				
			});


			Ext.apply(obj, {
				uploadUrl : 'file_upload_dowith.jsp'
			});
			obj.render();
		//-->
		</script>		
	</div>
</div>
</body>
</html>
