<!--
 * FCKeditor - The text editor for internet
 * Copyright (C) 2003-2006 Frederico Caldeira Knabben
 * 
 * Licensed under the terms of the GNU Lesser General Public License:
 * 		http://www.opensource.org/licenses/lgpl-license.php
 * 
 * For further information visit:
 * 		http://www.fckeditor.net/
 * 
 * "Support Open Source software. What about a donation today?"
 * 
 * File Name: fck_colorselector.html
 * 	Color Selection dialog window.
 * 
 * File Authors:
 * 		Frederico Caldeira Knabben (fredck@fckeditor.net)
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="robots" content="noindex, nofollow" />
		<style TYPE="text/css">
			#ColorTable		{ cursor: pointer ; cursor: hand ; }
			#hicolor		{ height: 74px ; width: 74px ; border-width: 1px ; border-style: solid ; }
			#hicolortext	{ width: 75px ; text-align: right ; margin-bottom: 7px ; }
			#selhicolor		{ height: 20px ; width: 74px ; border-width: 1px ; border-style: solid ; }
			#selcolor		{ width: 75px ; height: 20px ; margin-top: 0px ; margin-bottom: 7px ; }
			#btnClear		{ width: 75px ; height: 22px ; margin-bottom: 6px ; }
			.ColorCell		{ height: 15px ; width: 15px ; }
		</style>
		<script type="text/javascript">
		
var oEditor = window.parent.InnerDialogLoaded() ;
var FCK = oEditor.FCK ;
var oCustomValue = window.parent.dialogArguments.CustomValue;
var fCallBack = (oCustomValue!=null)?oCustomValue["CallBack"]:function(){};
var oTemplateParams = (oCustomValue!=null)?oCustomValue["TemplateParams"]:{};
function OnLoad()
{
	// First of all, translate the dialog box texts
	oEditor.FCKLanguageManager.TranslatePage(document) ;

	CreateParamsTable(oTemplateParams);

	window.parent.SetOkButton( false ) ;	
	window.parent.SetAutoSize( true ) ;
}
var oParamNames = [];
var oFormats = {};
function CreateParamsTable(_oTemplateParams){
	var eTemplate = document.getElementById('params_template');
	var sTemplate = eTemplate.value;
	var sHTML = '';
	for(var i=0;i<_oTemplateParams.length;i++){
		var oParam = _oTemplateParams[i];
		oParamNames[oParamNames.length] = oParam.Name;
		if(oParam['Format']!=null){
			oFormats[oParam.Name] = oParam['Format'];
		}
		sHTML += sTemplate.replace(/\{#(.*?)\}/g,function(_s0,_sParam){
			return oParam[_sParam]||_sParam;
		});
	}
	document.getElementById('params').innerHTML = sHTML;
}

function Ok()
{
	//TODO
	var oParams = {};
	for(var i=0;i<oParamNames.length;i++){
		var sParamName = oParamNames[i];
		var sFormat = oFormats[sParamName];
		if(sFormat!=null){
			try{
				eval('var funcFormat = '+sFormat);
				//TODO
			}catch(er){
				var funcFormat = null;
			}
		}
		if(typeof funcFormat=='function'){
			oParams[sParamName] = funcFormat(document.getElementById(sParamName).value);
//			var oDiv = document.createElement('DIV');
//			oDiv.innerText = document.getElementById(sParamName).value;
//			oParams[sParamName] = oDiv.innerHTML;
//			delete oDiv;
		}
		else{
			oParams[sParamName] = document.getElementById(sParamName).value;
		}
	}
	if ( typeof(fCallBack) == 'function' )
		fCallBack( oParams ) ;
	return true ;
}
		</script>
	<script src="fck_template_format.js" type="text/javascript"></script>
	<style type="text/css">
			body {
				padding-top:0px;
				background-color: #CCCCCC;
			}
			.input_btn{
				width:60px;
				margin-right:10px;
			}
			.textarea{
				border:1px solid gray;
			}
			.input_text{
				border:1px solid gray;
				width:60px;
			}
			.param_name{
				font-size:14px;
				font-weight:bold;
				float:left;
				text-align:right;
				padding-right:4px;
				width:76px;
			}
			.param_value{
				float:left;
			}
			.param_row{
				display:block;
				padding:0 0 2px 2px;
				width:100%;
			}
			.message{
				width:100%;
				height:24px;
				font-size:14px;
				text-align:left;
				color:blue;
				font-weight:bold;
			}
	</style>
</head>
	<body onload="OnLoad()" scroll="no" style="OVERFLOW: hidden">
		<textarea id="params_template" style="display:none">
			<div class="param_row">
				<span class="param_name">{#DisplayName}:</span>
				<span class="param_value">{#Html}</span>
			</div>
		</textarea>
		<table height="100%" width="100%">
			<tr>
				<td align="left" valign="top">
		<table cellpadding="0" cellspacing="0" border="0" width="100%" height="100%">
			<tr>
				<td align="center" valign="middle">
					<div class="message">请设置模板中的参数:</div>
					<div id="params" style="margin-top:5px;"></div>
				</td>
			</tr>
		</table>
				</td>
				<td width="8%" align="center" valign="top">
					<div style="width:2px;border-left:1px solid gray;background:white;overflow:hidden;height:95%;"></div></td>
				<td width="16%" valign="top">
					<input id="btnOk" class="input_btn" onclick="window.parent.Ok();"
						type="button" value="Ok" fcklang="DlgBtnOK"/>
					<div style="height:5px;overflow:hidden"></div>
					<input name="button2" class="input_btn" type="button" value="Close" onclick="window.parent.Cancel();" fcklang="DlgBtnCancel">
				</td>
			</tr>
		</table>
	</body>
</html>
