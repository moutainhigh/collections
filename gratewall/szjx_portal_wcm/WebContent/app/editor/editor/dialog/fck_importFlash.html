<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
 * FCKeditor - The text editor for Internet - http://www.fckeditor.net
 * Copyright (C) 2003-2007 Frederico Caldeira Knabben
 *
 * == BEGIN LICENSE ==
 *
 * Licensed under the terms of any of the following licenses at your
 * choice:
 *
 *  - GNU General Public License Version 2 or later (the "GPL")
 *    http://www.gnu.org/licenses/gpl.html
 *
 *  - GNU Lesser General Public License Version 2.1 or later (the "LGPL")
 *    http://www.gnu.org/licenses/lgpl.html
 *
 *  - Mozilla Public License Version 1.1 or later (the "MPL")
 *    http://www.mozilla.org/MPL/MPL-1.1.html
 *
 * == END LICENSE ==
 *
 * This dialog is shown when, for some reason (usually security settings),
 * the user is not able to paste data from the clipboard to the editor using
 * the toolbar buttons or the context menu.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="robots" content="noindex, nofollow" />

	<script type="text/javascript">
var oEditor = window.parent.InnerDialogLoaded() ;
var FCK = oEditor.FCK;
var FCKLang = oEditor.FCKLang ;
var FCKTools	= oEditor.FCKTools ;
var FCKConfig	= oEditor.FCKConfig ;

window.onload = function ()
{
	// First of all, translate the dialog box texts
	oEditor.FCKLanguageManager.TranslatePage(document) ;

	window.parent.SetBtnsRow(false);
	window.parent.SetAutoSize( true ) ;	
}

function Ok()
{
	var sHtml = document.getElementById('txtData').value;
	if(sHtml.replace(/(^\s*)|(\s*$)/g,"") == ""){
		alert(FCKLang.ImportTest1 || "粘贴内容为空！");
		return;
	}
	if(!sHtml.match(/<(\s)*embed(\s)+/ig)){
		alert(FCKLang.ImportTest2 || "粘贴内容不符合要求！");
		return;
	}
	//格式处理，增加ignore=1属性
	sHtml = sHtml.replace(/<(\s)*embed(\s)+([^>])/ig,"<embed ignore='1' $3");
	var oImage = FCK.CreateElement( 'div' ) ;
	oImage.innerHTML = sHtml;
	oEditor.FCKUndo.SaveUndoStep() ;
	var	stemp = FCK.FormatEditedHtml(FCK.EditorDocument.body.innerHTML);
	return true ;
}
function selectWords(){
	var oElement = document.getElementById('txtData');
	if(oElement){
		oElement.select();
		oElement.focus();
	}
}

</script>
	<style type="text/css">
			body {
				padding-top:0px;
				background-color: #CCCCCC;
			}
			.input_btn{
				width:60px;
				margin-right:10px;
			}
			.input_text{
				border:1px solid gray;
				width:60px;
			}
</style>
</head>
<body style="overflow: hidden">
		<table height="100%" width="100%">
			<tr>
				<td align="left" valign="top">
	<table cellspacing="0" cellpadding="0" width="100%" border="0" style="height: 98%">
		<tr>
			<td>
				<div>
				<span fcklang="DlgPasteMsg2">Please paste inside the following box using the keyboard
					(<strong>Ctrl+V</strong>) and hit <strong>OK</strong>.</span>
				<br />
				&nbsp;
				</div>
			</td>
		</tr>
		<tr>
			<td valign="top" height="100%" style="border-right: #000000 1px solid; border-top: #000000 1px solid;
				border-left: #000000 1px solid; border-bottom: #000000 1px solid">
				<textarea id="txtData" cols="80" rows="5" style="border: #000000 1px;
					width: 99%; height: 98%" onkeydown="selectWords()" onfocus="selectWords()" fcklang="ImportVideo">可粘贴优酷，土豆等视频共享的HTML代码</textarea>
				<iframe id="frmData" src="javascript:void(0)" height="98%" width="99%" frameborder="0"
					style="border-right: #000000 1px; border-top: #000000 1px; display: none; border-left: #000000 1px;
					border-bottom: #000000 1px; background-color: #ffffff"></iframe>
			</td>
		</tr>
	</table>
				</td>
				<td width="8%" align="center" valign="top">
					<div style="width:2px;border-left:1px solid gray;background:white;overflow:hidden;height:260px;"></div></td>
				<td width="16%" valign="top">
					<input id="btnOk" class="input_btn" onclick="window.parent.Ok();"
						type="button" value="Ok" fcklang="DlgBtnOK"/>
					<div style="height:5px;overflow:hidden"></div>
					<input name="button2" class="input_btn" type="button" value="Close" onclick="window.parent.Cancel();" fcklang="DlgBtnCancel">
				</td>
			</tr>
		</table>
</body>
</html>
