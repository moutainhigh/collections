Ext.apply(wcm.LANG, {
DOC_UNIT : '个',
VIDEO : '视频',
PHOTO : '图片',
FILTER_ALL : '全部视频',
FILTER_NEW : '新稿', 
FILTER_CANPUB : '可发',
FILTER_PUBED : '已发',
FILTER_REJECTED : '已否',
FILTER_EDITED : '已编',
FILTER_RETURN : '返工',
FILTER_SIGNED : '已签',
FILTER_THINKING : '正审',
FILTER_MY : '我创建的',
FILTER_LAST3 : '最近三天',
FILTER_LASTWEEK : '最近一周',
FILTER_LASTMONTH : '最近一月',
VIDEO_PROCESS_1 : '执行',
VIDEO_PROCESS_2 : '未选中任何{0}状态',
VIDEO_PROCESS_3 : '个',
VIDEO_PROCESS_4 : '视频版本',
VIDEO_PROCESS_5 : "成功恢复视频[ID={0}]为版本[版本号={1}]!",
VIDEO_PROCESS_6 : 'HTML编辑器尚未加载完成，请稍后再试.',
VIDEO_PROCESS_7 : '从HTML切换到纯文本，当前视频中的字体、格式等信息都将丢失，是否确认切换？',
VIDEO_PROCESS_8 : '正文',
VIDEO_PROCESS_9 : '链接',
VIDEO_PROCESS_10 : '链接地址不合法！正确格式为：http(s)|ftp://...',
VIDEO_PROCESS_11 : '链接地址长度不能超过100.',
VIDEO_PROCESS_12 : '文件',
VIDEO_PROCESS_13 : '{0}内容不能为空.',
VIDEO_PROCESS_14 : '视频另存到栏目...',
VIDEO_PROCESS_15 : '视频引用到栏目...',
VIDEO_PROCESS_16 : '附件管理',
VIDEO_PROCESS_17 : '相关视频管理',
VIDEO_PROCESS_18 : '标题维护-简易编辑器',
VIDEO_PROCESS_19 : '摘要维护-简易编辑器',
VIDEO_PROCESS_20 : "预览",
VIDEO_PROCESS_21 : "保存并关闭",
VIDEO_PROCESS_22 : "保存并新建",
VIDEO_PROCESS_23 : "发布并新建",
VIDEO_PROCESS_24 : "保存并发布",
VIDEO_PROCESS_25 : "关闭",
VIDEO_PROCESS_26 : '保存',
VIDEO_PROCESS_27 : '输入的URL地址不符合规范(http|ftp|https|file)://...',
VIDEO_PROCESS_28 : 'SimpleEditPanel控件上未指定属性"grid_rowid"',
VIDEO_PROCESS_29 : 'SimpleEditPanel控件上未指定属性"_fieldName"',
VIDEO_PROCESS_30 : 'SimpleEditPanel控件上未指定属性"appendix_type"',
VIDEO_PROCESS_31 : '确定',
VIDEO_PROCESS_32 : '请选择当前视频要复制到的目标栏目!',
VIDEO_PROCESS_33 : '执行进度，请稍候...',
VIDEO_PROCESS_34 : '提交数据',
VIDEO_PROCESS_35 : '成功执行完成',
VIDEO_PROCESS_36 : '视频复制结果',
VIDEO_PROCESS_37 : '导出',
VIDEO_PROCESS_38 : "请输入一个整数.",
VIDEO_PROCESS_39 : '创建',
VIDEO_PROCESS_40 : '请选择当前视频要引用到的目标栏目!',
VIDEO_PROCESS_41 : '导入',
VIDEO_PROCESS_42 : '视频导入结果',
VIDEO_PROCESS_43 : '尚未选择由TRS数据库导出的XML文件.',
VIDEO_PROCESS_44 : '未选择其他XML文件.',
VIDEO_PROCESS_45 : '管理TRS映射文件',
VIDEO_PROCESS_46 : '关闭',
VIDEO_PROCESS_47 : '视频引用结果',
VIDEO_PROCESS_48 : '正在上传文件:',
VIDEO_PROCESS_49 : '请选择要新建视频的所属栏目!',
VIDEO_PROCESS_50 : '请选择要批量导入Office视频的所属栏目!',
VIDEO_PROCESS_51 : '与服务器交互时出现错误',
VIDEO_PROCESS_52 : '请选择当前视频要移动到的目标栏目!',
VIDEO_PROCESS_53 : '不能将当前视频从当前栏目移动到自身!',
VIDEO_PROCESS_54 : '视频移动结果',
VIDEO_PROCESS_55 : '文件名输入为空!',
VIDEO_PROCESS_56 : '编辑映射规则',
VIDEO_PROCESS_57 : '您确定要删除这个映射文件？',
VIDEO_PROCESS_58 : '映射关系',
VIDEO_PROCESS_59 : '请选择数据库字段.',
VIDEO_PROCESS_60 : "请指定TRS库字段名.",
VIDEO_PROCESS_61 : "数据库字段 [{0}] 已经存在！",
VIDEO_PROCESS_62 : "三天内",
VIDEO_PROCESS_63 : "一周内",
VIDEO_PROCESS_64 : "一月内",
VIDEO_PROCESS_65 : "未知",
VIDEO_PROCESS_66 : '是',
VIDEO_PROCESS_67 : "标题包含",
VIDEO_PROCESS_68 : "发稿人",
VIDEO_PROCESS_69 : "检索范围",
VIDEO_PROCESS_70 : "含子栏目",
VIDEO_PROCESS_71 : "创建时间",
VIDEO_PROCESS_72 : "发布时间",
VIDEO_PROCESS_73 : "视频来源",
VIDEO_PROCESS_74 : "视频状态",
VIDEO_PROCESS_75 : "关键词",
VIDEO_PROCESS_76 : '站点视频操作任务',
VIDEO_PROCESS_77 : '栏目视频操作任务',
VIDEO_PROCESS_78 : '视频操作任务',
VIDEO_PROCESS_79 : '检索结果操作任务',
VIDEO_PROCESS_80 : '检索条件详细信息',
VIDEO_PROCESS_81 : '选择要新建视频的栏目',
VIDEO_PROCESS_82 : '视频-智能创建Office视频到栏目[{0}]',
VIDEO_PROCESS_83 : '视频-导入视频到栏目[{0}]',
VIDEO_PROCESS_84 : '视频-批量导入Office视频到栏目[{0}]',
VIDEO_PROCESS_85 : '选择要智能创建视频的栏目',
VIDEO_PROCESS_86 : '选择要批量导入Office视频的栏目',
VIDEO_PROCESS_87 : '视频-批量导入Office视频',
VIDEO_PROCESS_88 : '选择要视频导入的目标栏目',
VIDEO_PROCESS_89 : '视频-导入视频',
VIDEO_PROCESS_90 : '此操作可能需要较长时间。确实要导出所有视频吗？',
VIDEO_PROCESS_91 : '视频-导出所有视频',
VIDEO_PROCESS_92 : '视频-改变状态',
VIDEO_PROCESS_93 : '视频-视频复制到...',
VIDEO_PROCESS_94 : '视频-视频移动到...',
VIDEO_PROCESS_95 : '视频-视频引用到...',
VIDEO_PROCESS_96 : '视频-导出视频',
VIDEO_PROCESS_97 : '视频版本保存结果',
VIDEO_PROCESS_98 : '视频-版本管理',
VIDEO_PROCESS_99 : '-调整顺序',
VIDEO_PROCESS_100 : '您确定要{0}以下视频？\n',
VIDEO_PROCESS_101 : '引用',
VIDEO_PROCESS_102 : '移动',
VIDEO_PROCESS_103 : '复制',
VIDEO_PROCESS_104 :'结果',
VIDEO_PROCESS_105 : "成功恢复视频[ID={0}]为版本[版本号={1}]!",
VIDEO_PROCESS_106 :'创建一个新视频',
VIDEO_PROCESS_107 :'智能创建一个新视频',
VIDEO_PROCESS_108 :'上传新视频',
VIDEO_PROCESS_109 :'导出所有视频',
VIDEO_PROCESS_110 :'批量新建视频',
VIDEO_PROCESS_111 :'导出当前站点下的所有视频',
VIDEO_PROCESS_112 :'移动所有视频到',
VIDEO_PROCESS_113 :'复制所有视频到',
VIDEO_PROCESS_114 :'导出当前栏目下的所有视频',
VIDEO_PROCESS_115 :'修改这个视频',
VIDEO_PROCESS_116 :'预览这个视频',
VIDEO_PROCESS_117 :'预览这个视频发布效果',
VIDEO_PROCESS_118 :'发布这个视频',
VIDEO_PROCESS_119 :'发布这个视频，生成这个视频的细览页面以及更新相关概览页面',
VIDEO_PROCESS_120 :'复制这个视频到',
VIDEO_PROCESS_121 :'引用这个视频到',
VIDEO_PROCESS_122 :'移动这个视频到',
VIDEO_PROCESS_123 :'将视频放入废稿箱',
VIDEO_PROCESS_124 :'将这个视频放入废稿箱',
VIDEO_PROCESS_125 :'改变这个视频状态',
VIDEO_PROCESS_126 :'设置这个视频权限',
VIDEO_PROCESS_127 :'仅发布这个视频细览',
VIDEO_PROCESS_128 :'仅发布这个视频细览，仅重新生成这个视频的细览页面',
VIDEO_PROCESS_129 :'撤销发布这个视频',
VIDEO_PROCESS_130 : '撤销发布这个视频，撤回已发布目录或页面',
VIDEO_PROCESS_131 :'为这个视频产生版本',
VIDEO_PROCESS_132 :'管理这个视频版本',
VIDEO_PROCESS_133 :'管理这个视频历史版本',
VIDEO_PROCESS_134 :'分隔线',
VIDEO_PROCESS_135 :'导出这个视频',
VIDEO_PROCESS_136 :'将这个视频导出成zip文件',
VIDEO_PROCESS_137 :'管理评论',
VIDEO_PROCESS_138 :'管理视频的评论',
VIDEO_PROCESS_139 :'调整顺序',
VIDEO_PROCESS_140 :'预览这些视频',
VIDEO_PROCESS_141 :'预览这些视频发布效果',
VIDEO_PROCESS_142 :'发布这些视频',
VIDEO_PROCESS_143 :'发布这些视频，生成这些视频的细览页面以及更新相关概览页面',
VIDEO_PROCESS_144 :'复制这些视频到',
VIDEO_PROCESS_145 :'移动这些视频到',
VIDEO_PROCESS_146 :'引用这些视频到',
VIDEO_PROCESS_147 :'改变这些视频的状态',
VIDEO_PROCESS_148 :'设置这些视频的权限',
VIDEO_PROCESS_149 :'仅发布这些视频细览',
VIDEO_PROCESS_150 :'仅发布这些视频细览，仅重新生成这些视频的细览页面',
VIDEO_PROCESS_151 :'撤销发布这些视频',
VIDEO_PROCESS_152 :'撤销发布这些视频，撤回已发布目录或页面',
VIDEO_PROCESS_153 :'为这些视频产生版本',
VIDEO_PROCESS_154 :'导出这些视频',
VIDEO_PROCESS_155 :'将当前视频导出成zip文件',
VIDEO_PROCESS_156 : '映射文件名',
VIDEO_PROCESS_157 : '映射文件名只支持字母和数字,长度为1-30.',
VIDEO_PROCESS_158 : '新建',
VIDEO_PROCESS_159 : '新建视频',
VIDEO_PROCESS_160 : '请选择要删除的视频',
VIDEO_PROCESS_161 : '删除',
VIDEO_PROCESS_162 : '删除这个/些视频',
VIDEO_PROCESS_163 : '请选择要预览的视频',
VIDEO_PROCESS_164 : '预览这个/些视频',
VIDEO_PROCESS_165 : '请选择要发布的视频',
VIDEO_PROCESS_166 : '快速发布',
VIDEO_PROCESS_167 : '发布这个/些视频',
VIDEO_PROCESS_168 : '刷新',
VIDEO_PROCESS_169 : '刷新列表',
VIDEO_PROCESS_170 : '视频列表管理',
VIDEO_PROCESS_171 : '请选择要移动的视频',
VIDEO_PROCESS_172 : '请选择要复制的视频',
VIDEO_PROCESS_173 : '请选择要引用的视频',
VIDEO_PROCESS_174 : '移动这个/些视频到',
VIDEO_PROCESS_175 : '复制这个/些视频到',
VIDEO_PROCESS_176 : '引用这个/些视频到',
VIDEO_PROCESS_177 : '视频标题',
VIDEO_PROCESS_178 : '序号',
VIDEO_PROCESS_179 : '栏目名称',
VIDEO_PROCESS_180 : '移除引用',
VIDEO_PROCESS_181 : '排序',
VIDEO_PROCESS_182 : "--当前视频--",
VIDEO_PROCESS_183 : "上移",
VIDEO_PROCESS_184 : "下移",
VIDEO_PROCESS_185 : "预览视频",
VIDEO_PROCESS_186 : "保存视频",
VIDEO_PROCESS_187 : "扩展字段管理",
VIDEO_PROCESS_188 : "至",
VIDEO_PROCESS_189 : "视频-智能创建Office视频",
VIDEO_PROCESS_190 : "无",
VIDEO_PROCESS_191 : '自动保存于:',
VIDEO_PROCESS_192 : '是否进入只读模式，点确定进入？',
VIDEO_PROCESS_193 : "扩展字段[",
VIDEO_PROCESS_194 : '视频版本保存结果',
VIDEO_PROCESS_195 : '显示注释',
VIDEO_PROCESS_196 : '隐藏注释',
VIDEO_PROCESS_197 :"当前视频列表不支持排序",
VIDEO_PROCESS_198 :"自动排序列表不支持手动排序",
VIDEO_PROCESS_199 :"当前视频没有权限排序",
VIDEO_PROCESS_200 :"[视频-",
VIDEO_PROCESS_201 :'置顶视频与非置顶视频间不能交叉排序.',
VIDEO_PROCESS_202 :'您确定要调整视频的顺序？',
VIDEO_PROCESS_203 : "[引用多个视频:",
VIDEO_PROCESS_204 : '链接型栏目不允许视频管理.',
VIDEO_PROCESS_205 : '链接地址:',
VIDEO_PROCESS_206 : '视频LOGO',
VIDEO_PROCESS_207 : '计划撤销发布时间不能早于当前时间',
VIDEO_PROCESS_208 : '系统提示信息',
VIDEO_PROCESS_209 : '选择模板',
VIDEO_PROCESS_210 : '插入广告位出错:',
VIDEO_PROCESS_211 : '标题',
VIDEO_PROCESS_212 : '发稿人',
VIDEO_PROCESS_213 : '关键词',
VIDEO_PROCESS_214 : '重新抓取缩略图',
VIDEO_PROCESS_215 : '抓取更合适的缩略图',
VIDEO_PROCESS_216 : '标引和切割' ,
VIDEO_PROCESS_217 : '对此视频进行标引和切割',
VIDEO_PROCESS_218 : '新建录制视频',
VIDEO_PROCESS_219 : '视频库设置',
VIDEO_PROCESS_220 : '新建视频直播',
VIDEO_PROCESS_221 : '管理评论',
VIDEO_PROCESS_222 : '管理视频的评论',
VIDEO_PROCESS_223 : '删除转码失败的视频',
VIDEO_PROCESS_224 : '请选择新建视频的所属栏目',
VIDEO_PROCESS_225 : "确定要<font color='red' style='font-size:14px;'>撤销发布</font>所选视频么？将<font color='red' style='font-size:14px;'>不可逆转</font>！",
VIDEO_PROCESS_226 : '发布这个视频,同时发布此视频的所有引用视频',
VIDEO_PROCESS_227 : '直接发布这些视频',
VIDEO_PROCESS_229 : '直接发布这个视频',
VIDEO_PROCESS_228 : '发布这些视频，同步发布这些视频所有的引用视频',
VIDEO_PROCESS_230 : '直接撤销这个视频',
VIDEO_PROCESS_231 : '撤销发布这个视频，同步撤销这个视频所有的引用视频',
VIDEO_PROCESS_232 : '直接撤销这些视频',
VIDEO_PROCESS_233 : '撤销发布这些视频，同步撤销这些视频所有的引用视频',
VIDEO_PROCESS_234 : '样本库管理'
});

Ext.ns('wcm.domain.videoMgr');
(function(){
var m_oMgr = wcm.domain.videoMgr;
function $openCenterWin(_sUrl, _sName, _width, _height, _sFeature){
if(!_width || !_height){
$openCentralWin(_sUrl, _sName);
return;
}
var _WIN_WIDTH = window.screen.availWidth;
var _WIN_HEIGHT = window.screen.availHeight;
var l = (_WIN_WIDTH - _width) / 2;
var t = (_WIN_HEIGHT - _height) / 2;
sFeature = "left="+l + ",top=" + t +",width=" 
+ _width + ",height=" + _height + "," + _sFeature;
var sName = _sName || "";
sName = sName.replace(/[^0-9a-zA-Z_]/g,'_');
var oWin = window.open(_sUrl, sName, sFeature);
if(oWin) oWin.focus();
}
function publish(objectids, _sMethodName,_oExtraParams){
_sMethodName = _sMethodName || 'publish';
var oPostData = {'ObjectIds' : objectids,'IsVideo':true};
getHelper().call("wcm6_viewdocument", _sMethodName, oPostData, true,
function(_transport,_json){
wcm.domain.PublishAndPreviewMgr.doAfterPublish(oPostData, _sMethodName, _transport, _json);
}
);
}
function getHelper(){
return new com.trs.web2frame.BasicDataHelper();
}
function openEditor(params){
if(params.DocumentId=='0'&&params.SiteId!=0){
FloatPanel.open(WCMConstants.WCM6_PATH + 'video/document_siteadd_step1.html?' 
+ $toQueryStr(params), wcm.LANG.VIDEO_PROCESS_81 || '选择要新建视频的栏目', 400, 350);
return;
}
var iWidth = window.screen.availWidth - 12;
var iHeight = window.screen.availHeight - 30;
var sFeature = 'location=no,resizable=yes,menubar=no,scrollbars=no,status=no,titlebar=no,toolbar=no,top=0,left=0,border=0,width='+iWidth+',height='+iHeight;
window.open(WCMConstants.WCM6_PATH + "video/video_addedit.jsp?" + $toQueryStr(params), "_blank" , sFeature);
}
function preparePostData(event){
var obj = event.getObj();
return {
'objectids' : event.getIds(),
'channelids' : event.getObjs().getPropertyAsInt('currchnlid')
};
}
function parseHost(host){
if(host.getType()==WCMConstants.OBJ_TYPE_CHANNEL){
return {ChannelId:host.getId(),SiteId:0};
}
if(host.getType()==WCMConstants.OBJ_TYPE_WEBSITE){
return {SiteId:host.getId(),ChannelId:0};
}
return {};
}
function doOptionsAfterDisplayInfo(_params, _fDoAfterDisp){
var DIALOG_DOCUMENT_INFO = 'document_info_dialog';
wcm.CrashBoarder.get('DIALOG_DOCUMENT_INFO').show({
title : wcm.LANG.DOCUMENT_PROCESS_208 || '系统提示信息',
src : WCMConstants.WCM6_PATH + 'docrecycle/video_info.html',
width:'500px',
height:'205px',
maskable:true,
params : _params,
callback : _fDoAfterDisp
});
}
Ext.apply(wcm.domain.videoMgr, {
upload: function(event) {
var oParams = Ext.apply({
DocumentId : 0,
FromEditor : 1
}, parseHost(event.getHost()));
openEditor(oParams);
},
snap: function(event) {
var docId = event.getObj().docId;
var sFeature = 'location=no,menubar=no,status=no,titlebar=no,toolbar=no,top=0,left=0,border=0,width=800,height=440';
window.open(WCMConstants.WCM6_PATH + "video/updateThumb.jsp?docId=" + docId, "_blank", sFeature);
},
preview : function(event){
var host = event.getHost();
var hostid = host.getId();
var oParams = {
FolderId : hostid,
FolderType : host.getType()=="website"? 103:101,
'IsVideo':true
};
var _sIds = event.getIds();
wcm.domain.PublishAndPreviewMgr.preview(_sIds,600,oParams,"wcm6_viewdocument");
},
basicpublish : function(event){
var oPageParams = event.getContext();
var _sIds = event.getIds();
var postData = Object.extend({},{
'ObjectIds' : _sIds,
'IsVideo':true
});
BasicDataHelper.call("wcm6_viewdocument", "basicpublish", postData, true, function(_transport,_json){
wcm.domain.PublishAndPreviewMgr.doAfterPublish(postData, "detailpublish",_transport,_json);
}.bind(this));
},
detailpublish : function(event){
var oPageParams = event.getContext();
var _sIds = event.getIds();
var postData = Object.extend({},{
'ObjectIds' : _sIds,
'IsVideo':true
});
BasicDataHelper.call("wcm6_viewdocument", "detailpublish", postData, true, function(_transport,_json){
wcm.domain.PublishAndPreviewMgr.doAfterPublish(postData, "detailpublish",_transport,_json);
}.bind(this));
},
directpublish : function(event){
var oPostData = {'ObjectIds' : event.getObjs().getPropertyAsString("docId").join(","), 'ObjectType' : 605 };
getHelper().call("wcm6_publish", "directPublish", oPostData, true,
function(_transport,_json){
wcm.domain.PublishAndPreviewMgr.doAfterPublish(oPostData, "directPublish", _transport, _json);
}
);
},
edit : function(event){
var obj = event.getObjs().getAt(0);
var host = event.getHost();
var oPageParams = event.getContext();
var oVideo = event.getObj();
var oParams = {
ChnlDocId : oVideo.recId,
DocumentId : oVideo.docId,
ChannelId :obj.getPropertyAsInt('channelid',0),
SiteId :host.getType()==WCMConstants.OBJ_TYPE_WEBSITE?host.getId():0,
FromEditor : 1
};
openEditor(oParams);
},
changestatus : function(event){
var oPageParams = event.getContext();
var host = event.getHost();
var hostid = host.getId();
var sId = event.getIds().join();
Object.extend(oPageParams,{
"ObjectIds":sId,
"IsPhoto":false,
'ChannelIds':(oPageParams,host.getType()=="website"?0:hostid)});
FloatPanel.open(WCMConstants.WCM6_PATH +'document/change_status.jsp?' + $toQueryStr(oPageParams), '视频-改变状态', CMSObj.afteredit(event));
},
copy : function(event,operItem){
var pageContext = event.getContext();
var sObjectids = event.getIds();
var host = event.getHost();
var hostId = host.getId();
var hostType = host.getIntType();
var hostChnlId = hostType == 101 ? hostId : 0;
sObjectids = (sObjectids.length!=0)?sObjectids:'0';
var channelids = event.getObjs().getPropertyAsString("currchnlid", 0);
if(!Ext.isArray(channelids)) channelids = [channelids];
var channelType = event.getObjs().getPropertyAsString("channelType", 0);
if(!Ext.isArray(channelType)) channelType = [channelType];
var bIsOneChannel = true;
var tmpChannelid = channelids[0];
for(var i=1,n=channelids.length; i<n; i++){
if(tmpChannelid!=channelids[i]){
bIsOneChannel = false;
break;
}
}
var nExcludeInfoView = 1;
for(index=0; index<=channelType.length; index++){
if(channelType[index]==13)nExcludeInfoView=0;
}
var args = {
IsRadio : 0,
ExcludeTop : 1,
ExcludeLink : 1,
ExcludeVirtual : 1,
ExcludeInfoView : nExcludeInfoView,
ExcludeOnlySearch : 1,
ShowOneType : 1,
SelectedChannelIds : channelids.join() || hostChnlId,
NotSelect : 1,
RightIndex : 31,
canEmpty : true
};
if(bIsOneChannel){
Ext.apply(args, {
CurrChannelId : hostChnlId || tmpChannelid || 0,
ExcludeSelf : 0
});
}
FloatPanel.open(
WCMConstants.WCM6_PATH + 'include/channel_select.html?close=1',
wcm.LANG.VIDEO_PROCESS_93 || '视频-视频复制到...',
function(selectIds, selectChnlDescs){
if(!selectIds||selectIds.length==0) {
Ext.Msg.$alert(wcm.LANG.VIDEO_PROCESS_32 ||'请选择当前视频要复制到的目标栏目!');
return false;
}
var nFromChnlId = event.getObj().getPropertyAsInt('currchnlid');
var oPostData = {
"ObjectIds" : sObjectids,
"FromChannelId" : nFromChnlId,
"ToChannelIds" : selectIds.join(',')
};
var oHelper = new com.trs.web2frame.BasicDataHelper();
var func = function(){
FloatPanel.close();
CMSObj.afteredit(event)();
}
oHelper.Call('wcm61_video','copy',oPostData,true,
function(_transport,_json){
if(_json!=null&&_json["REPORTS"]){
var oReports = _json["REPORTS"];
var stJson = com.trs.util.JSON;
var bIsSuccess = stJson.value(oReports, "IS_SUCCESS");
var title = stJson.value(oReports, "TITLE");
if(bIsSuccess=='true'){
if(title.indexOf("文档") != -1){
oReports.TITLE = oReports.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
if(oReports.REPORT.length){
for(var i =0;i< oReports.REPORT.length;i++){
var currItem = stJson.value(oReports.REPORT[i], "TITLE");
if( currItem != null)
oReports.REPORT[i].TITLE = currItem.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}else{
oReports.REPORT.TITLE = oReports.REPORT.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}
Ext.Msg.report(_json,wcm.LANG.VIDEO_PROCESS_36 ||'视频复制结果');
FloatPanel.hide();
}else{
if(title.indexOf("文档") != -1){
oReports.TITLE = oReports.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
if(oReports.REPORT.length){
for(var i =0;i< oReports.REPORT.length;i++){
var currItem = stJson.value(oReports.REPORT[i], "TITLE");
if( currItem != null)
oReports.REPORT[i].TITLE = currItem.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}else{
oReports.REPORT.TITLE = oReports.REPORT.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}
Ext.Msg.report(_json,wcm.LANG.VIDEO_PROCESS_36 ||'视频复制结果');
FloatPanel.hide();
}
}
},
function(_transport,_json){
$render500Err(_transport,_json);
FloatPanel.close();
}
);
},
dialogArguments = args
);
},
quote : function(event){
var oPostData = preparePostData(event);
FloatPanel.open(WCMConstants.WCM6_PATH +
'video/video_quoteto.html?' + $toQueryStr(oPostData),
wcm.LANG.VIDEO_PROCESS_95 || '视频-视频引用到...');
},
move : function(event,operItem){
var context = event.getContext();
var sObjectids = event.getIds();
var host = event.getHost();
var hostId = host.getId();
var hostType = host.getIntType();
var hostChnlId = hostType == 101 ? hostId : 0;
sObjectids = (sObjectids.length!=0)?sObjectids:'0';
var channelids = event.getObjs().getPropertyAsString("currchnlid", 0);
if(!Ext.isArray(channelids)) channelids = [channelids];
var channelType = event.getObjs().getPropertyAsString("channelType", 0);
if(!Ext.isArray(channelType)) channelType = [channelType];
var bIsOneChannel = true;
var tmpChannelid = channelids[0];
for(var i=1,n=channelids.length; i<n; i++){
if(tmpChannelid!=channelids[i]){
bIsOneChannel = false;
break;
}
}
var nExcludeInfoView = 1;
for(index=0; index<=channelType.length; index++){
if(channelType[index]==13)nExcludeInfoView=0;
}
var args = {
IsRadio : 1,
ExcludeTop : 1,
ExcludeLink : 1,
ExcludeVirtual : 1,
ExcludeInfoView : nExcludeInfoView,
ExcludeOnlySearch : 1,
ShowOneType : 1,
SelectedChannelIds : channelids.join() || hostChnlId,
NotSelect : 1,
RightIndex : 31,
canEmpty : true
};
if(bIsOneChannel){
Ext.apply(args, {
CurrChannelId : hostChnlId || tmpChannelid || 0,
ExcludeSelf : 1
});
}
FloatPanel.open(
WCMConstants.WCM6_PATH + 'include/channel_select.html?close=1',
wcm.LANG.VIDEO_PROCESS_94 || '视频-视频移动到...',
function(selectIds, selectChnlDescs){
if(!selectIds||selectIds.length==0) {
Ext.Msg.$alert(wcm.LANG.VIDEO_PROCESS_52 ||'请选择当前视频要移动到的目标栏目!');
return false;
}
var nFromChnlId = event.getObj().getPropertyAsInt('currchnlid');
var oPostData = {
"ObjectIds" : sObjectids,
"FromChannelId" : nFromChnlId,
"ToChannelId" : selectIds.join(',')
}
var func = function(){
FloatPanel.close();
CMSObj.afteredit(event)();
}
var oHelper = new com.trs.web2frame.BasicDataHelper();
oHelper.Call('wcm6_viewdocument', 'move',oPostData,true,
function(_transport,_json){
if(_json!=null&&_json["REPORTS"]){
var oReports = _json["REPORTS"];
var stJson = com.trs.util.JSON;
var bIsSuccess = stJson.value(oReports, "IS_SUCCESS");
var title = stJson.value(oReports, "TITLE");
if(bIsSuccess=='true'){
if(title.indexOf("文档") != -1){
oReports.TITLE = oReports.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
if(oReports.REPORT.length){
for(var i =0;i< oReports.REPORT.length;i++){
var currItem = stJson.value(oReports.REPORT[i], "TITLE");
if( currItem != null)
oReports.REPORT[i].TITLE = currItem.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}else{
oReports.REPORT.TITLE = oReports.REPORT.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}
Ext.Msg.report(_json,(wcm.LANG.VIDEO_PROCESS_54 ||'视频移动结果'),func);
FloatPanel.hide();
}else{
if(title.indexOf("文档") != -1){
oReports.TITLE = oReports.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
if(oReports.REPORT.length){
for(var i =0;i< oReports.REPORT.length;i++){
var currItem = stJson.value(oReports.REPORT[i], "TITLE");
if( currItem != null)
oReports.REPORT[i].TITLE = currItem.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}else{
oReports.REPORT.TITLE = oReports.REPORT.TITLE.replace(new RegExp(wcm.LANG.PUBLISH_6 || "文档","g"),wcm.LANG.PUBLISH_8 || "视频");
}
}
Ext.Msg.report(_json,(wcm.LANG.VIDEO_PROCESS_54 ||'视频移动结果'),func);
FloatPanel.hide();
}
}
},
function(_transport,_json){
$render500Err(_transport,_json);
FloatPanel.close();
}
);
},
dialogArguments = args
);
},
trash : function(event){
var oHost = parseHost(event.getHost());
var nCount = event.length();
var sHint = (nCount==1)?'':' '+nCount+' ';
var browserEvent = event.browserEvent;
var bDrop = !!(browserEvent && 
browserEvent.type=='keydown' && browserEvent.shiftKey);
var params = {
objectids: event.getIds(),
operation: bDrop ? '_forcedelete' : '_trash'
}
doOptionsAfterDisplayInfo(params, function(){
getHelper().call('wcm61_viewdocument', 'delete',
Ext.apply(oHost,{"ObjectIds": event.getIds(), "drop": bDrop}), true, 
function(){
event.getObjs().afterdelete();
}
);
});
},
segment : function(event){
var docId = event.getObj().docId;
var sFeature = 'location=no,menubar=no,status=no,titlebar=no,toolbar=no,top=0,left=0,border=0,width=800,height=580';
window.open(WCMConstants.WCM6_PATH + "video/cutVideo.jsp?docId=" + docId, "_blank", sFeature);
},
docpositionset : function(event){
var oPageParams = event.getContext();
var host = event.getHost();
var hostid = host.getId();
var objType = event.getObjs().getAt(0).objType;
var docid = event.getObjs().getAt(0).getPropertyAsInt("docId", 0);
Object.extend(oPageParams,host.getType()=="website"?{"siteid" : hostid}:{"channelid" : hostid});
Object.extend(oPageParams,{"DocumentId":docid,"DocType":objType,"DocTypeDesc":'视频'});
FloatPanel.open(WCMConstants.WCM6_PATH + 'document/document_position_set.jsp?' + $toQueryStr(oPageParams), (objType.trim()=='video'?('视频'):(wcm.LANG.PHOTO_CONFIRM_68 || '文档')) +
(wcm.LANG.PHOTO_CONFIRM_69 || '-调整顺序'), CMSObj.afteredit(event));
},
detailpublish : function(event){
publish(event.getIds(), 'detailPublish');
},
recallpublish : function(event){
var host = event.getHost();
var hostid = host.getId();
var _sIds = event.getIds();
var oParams = {
FolderId : hostid,
FolderType : host.getType()=="website"? 103:101
};
var sHtml = String.format("确定要{0}撤销发布{1}所选视频么？将{2}不可逆转{3}！",'<font color=\'red\' style=\'font-size:14px;\'>','</font>','<font color=\'red\' style=\'font-size:14px;\'>','</font>');
Ext.Msg.confirm(sHtml,{
yes : function(){
wcm.domain.PublishAndPreviewMgr.publish(_sIds, 600, 'recallPublish',oParams,"wcm6_viewdocument");
}
});
},
directRecallpublish : function(event){
var sHtml = String.format("确定要{0}撤销发布{1}所选文档及其所有引用文档么？将{2}不可逆转！{3}",'<font color=\'red\' style=\'font-size:14px;\'>','</font>','<font color=\'red\' style=\'font-size:14px;\'>','</font>');
Ext.Msg.confirm(sHtml,{
yes : function(){
publish(event.getIds(), 'recallpublishall');
}
})
},
setright : function(event){
var m_nDocumentObjType = 605;
$openCenterWin(WCMConstants.WCM6_PATH + "auth/right_set.jsp?ObjType=" +
m_nDocumentObjType + "&ObjId=" + event.getObjs().getPropertys("docId",0).join(),
"document_right_set", 900, 600, "resizable=yes");
},
live: function(event) {
var host = event.getHost();
var hostId = host.getId();
var sFeature = 'location=no,resizable=no,menubar=no,scrollbars=yes,status=yes,titlebar=no,toolbar=no,top=0,left=0,border=0,width=1000,height=900';
window.open(WCMConstants.WCM6_PATH + "video/live_add.jsp?SiteId=" + hostId, "_blank", sFeature);
},
multiupload: function(event) {
var oPageParams = event.getContext();
var host = event.getHost();
var chnId = host.getType()==WCMConstants.OBJ_TYPE_CHANNEL?host.getId():0;
var sFeature = 'location=no,resizable=no,menubar=no,scrollbars=yes,status=yes,titlebar=no,toolbar=no,top=0,left=0,border=0,width=800,height=560';
window.open(WCMConstants.WCM6_PATH + "video/video_batch_add.jsp?ChannelId=" + chnId, "_blank", sFeature);
},
commentmgr : function(event){
var docid = event.getObj().docId;
var host = event.getHost();
var hostid = host.getId();
var oParams = Ext.apply({
DocumentId : docid,
ChannelId :hostid,
SiteId : 0
}, parseHost(event.getHost()));
var sUrl = WCMConstants.WCM_ROOTPATH +'comment/comment_mgr.jsp?'
+ $toQueryStr(oParams);
$openMaxWin(sUrl);
}
});
})();
(function(){
var pageObjMgr = wcm.domain.videoMgr;
var reg = wcm.SysOpers.register;
reg({
key : 'upload',
type : 'videoInChannel',
desc : wcm.LANG.VIDEO_PROCESS_159 || '新建视频',
title : wcm.LANG.VIDEO_PROCESS_108 || '上传新视频',
rightIndex : 31,
order : 8,
fn : pageObjMgr['upload'],
quickKey : 'N'
});
reg({
key : 'upload',
type : 'videoInSite',
desc : wcm.LANG.VIDEO_PROCESS_159 || '新建视频',
title : wcm.LANG.VIDEO_PROCESS_108 || '上传新视频',
rightIndex : 31,
order : 8,
fn : pageObjMgr['upload'],
quickKey : 'N'
});
reg({
key : 'snap',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_214 || '重新抓取缩略图',
title : wcm.LANG.VIDEO_PROCESS_215 || '抓取更合适的缩略图',
rightIndex : 32,
order : 8,
fn : pageObjMgr['snap']
});
reg({
key : 'preview',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_116 || '预览这个视频',
title : wcm.LANG.VIDEO_PROCESS_116 || '预览这个视频',
rightIndex : 38,
order : 3,
fn : pageObjMgr['preview'],
quickKey : 'Y'
});
reg({
key : 'basicpublish',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_118 || '发布这个视频',
title : wcm.LANG.VIDEO_PROCESS_118 || '发布这个视频',
rightIndex : 39,
order : 4,
fn : pageObjMgr['basicpublish'],
isVisible : function(event){
var obj = event.getObj();
var converting = obj.getPropertyAsInt('converting', 1);
return converting == 1 || converting == 3;
},
quickKey : 'P'
});
reg({
key : 'edit',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_115 ||'修改这个视频',
title : wcm.LANG.VIDEO_PROCESS_115 ||'修改这个视频',
rightIndex : 32,
order : 1,
isVisible : function(event){
var obj = event.getObj();
var converting = obj.getPropertyAsInt('converting', 1);
return converting == 1 || converting == 3;
},
fn : pageObjMgr['edit'],
quickKey : 'M'
});
reg({
key : 'changestatus',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_125 ||'改变这个视频状态',
title : wcm.LANG.VIDEO_PROCESS_125 ||'改变这个视频状态',
rightIndex : 35,
order : 8,
fn : pageObjMgr['changestatus']
});
reg({
key : 'move',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_122 ||'移动这个视频到',
title : wcm.LANG.VIDEO_PROCESS_122 ||'移动这个视频到',
rightIndex : 33,
order : 6,
fn : pageObjMgr['move']
});
reg({
key : 'move',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_145 ||'移动这些视频到',
title : wcm.LANG.VIDEO_PROCESS_145 ||'移动这些视频到',
rightIndex : 33,
order : 6,
fn : pageObjMgr['move']
});
reg({
key : 'trash',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_123 ||'将视频放入废稿箱',
title : wcm.LANG.VIDEO_PROCESS_124 ||'将这个视频放入废稿箱',
rightIndex : 33,
order : 7,
fn : pageObjMgr['trash'],
quickKey : ['Delete', 'ShiftDelete']
});
reg({
key : 'trash',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_123 ||'将视频放入废稿箱',
title : wcm.LANG.VIDEO_PROCESS_123 ||'将视频放入废稿箱',
rightIndex : 33,
order : 3,
fn : pageObjMgr['trash'],
quickKey : ['Delete', 'ShiftDelete']
});
reg({
key : 'segment',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_216 || '标引与切割',
title : wcm.LANG.VIDEO_PROCESS_217 || '对这个视频进行标引和切割',
rightIndex : 31,
order : 8,
isVisible : function(event) {
var actualTop = $MsgCenter.getActualTop();
if(actualTop.autoclip==true){
return true;
}
return false;
},
fn : pageObjMgr['segment']
});
reg({
key : 'detailpublish',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_127 ||'仅发布这个视频细览',
title : wcm.LANG.VIDEO_PROCESS_128 ||'仅发布这个视频细览，仅重新生成这个视频的细览页面',
rightIndex : 39,
order : 9,
isVisible : function(event){
var obj = event.getObj();
var converting = obj.getPropertyAsInt('converting', 1);
return converting == 1 || converting == 3;
},
fn : pageObjMgr['detailpublish']
});
reg({
key : 'directpublish',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_229 ||'直接发布这个视频',
title : wcm.LANG.VIDEO_PROCESS_226 ||'发布这个视频,同时发布此视频的所有引用视频',
rightIndex : 39,
order : 11,
isVisible : function(event){
var obj = event.getObj();
var converting = obj.getPropertyAsInt('converting', 1);
return converting == 1 || converting == 3;
},
fn : pageObjMgr['directpublish']
});
reg({
key : 'recallpublish',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_129 || '撤销发布这个视频',
title : wcm.LANG.VIDEO_PROCESS_130 || '撤销发布这个视频,撤回已发布目录或页面',
rightIndex : 39,
order : 18,
fn : pageObjMgr['recallpublish']
});
reg({
key : 'directRecallpublish',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_230 ||'直接撤销发布这个视频',
title : wcm.LANG.VIDEO_PROCESS_231 ||'撤销发布这个视频，同步撤销这个视频所有的引用视频',
rightIndex : 39,
order : 13,
fn : pageObjMgr['directRecallpublish']
});
reg({
key : 'setright',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_126 || '设置这个视频的权限',
title : wcm.LANG.VIDEO_PROCESS_126 || '设置这个视频的权限...',
rightIndex : 61,
order : 20,
fn : pageObjMgr['setright']
});
reg({
key : 'preview',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_140 || '预览这些视频',
title : wcm.LANG.VIDEO_PROCESS_140 || '预览这些视频',
rightIndex : 38,
order : 13,
fn : pageObjMgr['preview'],
quickKey : 'Y'
});
reg({
key : 'basicpublish',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_142 || '发布这些视频',
title : wcm.LANG.VIDEO_PROCESS_142 || '发布这些视频',
rightIndex : 39,
order : 14,
fn : pageObjMgr['basicpublish'],
isVisible : function(event){
var objs = event.getObjs();
for(var i=1;i<objs.size();i++){
var obj = objs.getAt(i);
var converting = obj.getPropertyAsInt('converting', 1);
if(converting == 0){
return false;
}
}
return converting == 1 || converting == 3;
},
quickKey : 'P'
});
reg({
key : 'directpublish',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_227 ||'直接发布这些视频',
title : wcm.LANG.VIDEO_PROCESS_228 ||'发布这些视频，同步发布这些视频所有的引用视频',
rightIndex : 39,
order : 10,
isVisible : function(event){
var objs = event.getObjs();
for(var i=1;i<objs.size();i++){
var obj = objs.getAt(i);
var converting = obj.getPropertyAsInt('converting', 1);
if(converting == 0){
return false;
}
}
return converting == 1 || converting == 3;
},
fn : pageObjMgr['directpublish']
});
reg({
key : 'recallpublish',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_151 || '撤销发布这些视频',
title : wcm.LANG.VIDEO_PROCESS_152 || '撤销发布这些视频,撤回已发布目录或页面',
rightIndex : 39,
order : 19,
fn : pageObjMgr['recallpublish']
});
reg({
key : 'directRecallpublish',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_232 ||'直接撤销发布这些视频',
title : wcm.LANG.VIDEO_PROCESS_233 ||'撤销发布这些视频，同步撤销这些视频所有的引用视频',
rightIndex : 39,
order : 12,
fn : pageObjMgr['directRecallpublish']
});
reg({
key : 'setright',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_148 || '设置这些视频的权限',
title : wcm.LANG.VIDEO_PROCESS_148 || '设置这些视频的权限...',
rightIndex : 61,
order : 21,
fn : pageObjMgr['setright']
});
reg({
key : 'changestatus',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_147 || '改变这些视频的状态',
title : wcm.LANG.VIDEO_PROCESS_147 || '改变这些视频的状态',
rightIndex : 35,
order : 17,
fn : pageObjMgr['changestatus']
});
reg({
key : 'detailpublish',
type : 'videos',
desc : wcm.LANG.VIDEO_PROCESS_149 ||'仅发布这些视频细览',
title : wcm.LANG.VIDEO_PROCESS_150 ||'仅发布这些视频细览，仅重新生成这些文档的细览页面',
rightIndex : 39,
order : 9,
isVisible : function(event){
var objs = event.getObjs();
for(var i=1;i<objs.size();i++){
var obj = objs.getAt(i);
var converting = obj.getPropertyAsInt('converting', 1);
if(converting == 0){
return false;
}
}
},
fn : pageObjMgr['detailpublish']
});
reg({
key : 'multiupload',
type : 'videoInChannel',
desc : wcm.LANG.VIDEO_PROCESS_110 ||'批量新建视频',
title : wcm.LANG.VIDEO_PROCESS_110 ||'批量新建视频...',
rightIndex : 31,
order : 9,
fn : pageObjMgr['multiupload']
});
reg({
key : 'docpositionset',
type : 'video',
desc : wcm.LANG.PHOTO_CONFIRM_90 || '调整顺序',
title : wcm.LANG.PHOTO_CONFIRM_90 || '调整顺序',
rightIndex : 62,
order : 24,
fn : pageObjMgr['docpositionset'],
isVisible : function(event){
if(event.getHost().getType() == WCMConstants.OBJ_TYPE_CHANNEL)
return true;
return false;
}
});
reg({
key : 'commentmgr',
type : 'video',
desc : wcm.LANG.VIDEO_PROCESS_221 ||'管理评论',
title : wcm.LANG.VIDEO_PROCESS_222 ||'管理视频的评论',
rightIndex : 8,
order : 40,
fn : pageObjMgr['commentmgr'],
isVisible : function(event){
try{
return $MsgCenter.getActualTop().g_IsRegister['comment'];
}catch(err){
return false;
}
}
});
})();

Ext.ns('wcm.Videos', 'wcm.Video');
WCMConstants.OBJ_TYPE_VIDEO = 'video';
wcm.Videos = function(_config, _context){
this.objType = WCMConstants.OBJ_TYPE_VIDEO;
wcm.Videos.superclass.constructor.call(this, _config, _context);
}
Ext.extend(wcm.Videos, wcm.CMSObjs, {
});
wcm.Video = function(_config, _context){
this.objType = WCMConstants.OBJ_TYPE_VIDEO;
wcm.Video.superclass.constructor.call(this, _config, _context);
var arrRights = {
"view" : -1
};
for(rightName in arrRights){
var cameRightName = rightName.camelize();
var nRightIndex = parseInt(arrRights[rightName], 10);
this['can'+cameRightName] = function(){
return wcm.AuthServer.hasRight(this.right, nRightIndex);
}
}
}
CMSObj.register(WCMConstants.OBJ_TYPE_VIDEO, 'wcm.Video');
Ext.extend(wcm.Video, wcm.CMSObj, {
});

(function(){
var sName = wcm.LANG['VIDEO'] || '视频';
wcm.PageOper.registerPanels({
vInRoot : {
isHost : true,
title : String.format(wcm.LANG['OPER_TITLE_INROOT'] || '库{0}操作任务', sName),
displayNum : 5
},
videoInSite : {
isHost : true,
title : String.format(wcm.LANG['OPER_TITLE_INSITE'] || '站点{0}操作任务', sName),
displayNum : 5
},
videoInChannel : {
isHost : true,
title : String.format(wcm.LANG['OPER_TITLE_INCHANNEL'] || '栏目{0}操作任务', sName),
displayNum : 5
},
video : {
title : String.format(wcm.LANG['OPER_TITLE_OBJ'] || '{0}操作任务', sName),
displayNum : 7,
url : '?serviceid=wcm61_video&methodname=jFindbyid',
params : function(opt){
var host = opt.event.getHost()
switch(host.getType()){
case "website" :
return "siteId=" + host.getId();
case "channel" :
return "channelId=" + host.getId();
}
}
},
videos : {
title : String.format(wcm.LANG['OPER_TITLE_OBJ'] || '{0}操作任务', sName),
displayNum : 7
}
});
})();

