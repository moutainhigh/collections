<html xmlns="http://www.w3.org/1999/xhtml" xmlns:TRS="" xmlns:TRS_UI="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title id="tlDoc" WCMAnt:param="channel_select.html.title">栏目选择...</title>
<script src="../../app/js/runtime/myext-debug.js"></script>
<script src="../../app/js/source/wcmlib/core/MsgCenter.js"></script>
<script src="../../app/js/data/locale/photo.js"></script>
<script src="../../app/js/source/wcmlib/WCMConstants.js"></script>
<!--AJAX-->
<script src="../../app/js/data/locale/ajax.js"></script>
<script src="../../app/js/source/wcmlib/com.trs.web2frame/AjaxRequest.js"></script>
<!--wcm-dialog start-->
<SCRIPT src="../../app/js/source/wcmlib/Observable.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/Component.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/dialog/Dialog.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/dialog/DialogAdapter.js"></SCRIPT>
<link href="../../app/css/wcm-widget.css" rel="stylesheet" type="text/css" />
<link href="../../app/js/source/wcmlib/dialog/resource/dlg.css" rel="stylesheet" type="text/css" />
<link href="../../app/js/source/wcmlib/button/resource/button.css" rel="stylesheet" type="text/css" />
<!--wcm-dialog end-->
<!-- CarshBoard Inner Start -->
<SCRIPT src="../../app/js/source/wcmlib/Observable.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/Component.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/crashboard/CrashBoard.js"></SCRIPT>
<SCRIPT src="../../app/js/source/wcmlib/crashboard/CrashBoardAdapter.js"></SCRIPT>
<link href="../../app/css/wcm-widget.css" rel="stylesheet" type="text/css" />
<link href="../../app/js/source/wcmlib/crashboard/resource/crashboard.css" rel="stylesheet" type="text/css" />
<link href="../../app/js/source/wcmlib/button/resource/button.css" rel="stylesheet" type="text/css" />
<!-- CarshBoard Inner End -->
<script language="javascript">
    window.m_cbCfg = {
        btns : [
            {
                text : wcm.LANG.PHOTO_CONFIRM_1 || '确定',
                cmd : function(){
                    return getSeletedIds();
                }
            },
            {
				text : wcm.LANG.PHOTO_CONFIRM_2 || '取消', 
				cmd : function(){
				}
			}
        ]
    };
</script>
<script>	
	var m_sSelectMode = "multi";
	function init(_args){
		var _sUrl = "../nav_tree/nav_tree_select.jsp?ExcludeTop=1&ExcludeVirtual=1&RightIndex=31&ShowOneType=1&SiteTypes=1&MultiSites=1";
		if(_args.mode == "radio"){
			m_sSelectMode = "radio";
			_sUrl += "&IsRadio=1&ExcludeSelf=1";
		}else{
			m_sSelectMode = "multi";
		}
		
		var t = _args.SelectedIds;
		if(t && _args.Type != "website"){
			_sUrl += "&SelectedChannelIds="+t;
		}
		t = _args.CurrId || 0;
		if(_args.Type == "channel"){
			_sUrl += "&CurrChannelId="+t;
			if(m_sSelectMode == "multi"){
				_sUrl += "&ExcludeSelf=1";
			}
		}else{
			_sUrl += "&CurrSiteId="+t;
		}
		t = _args.SiteId;
		if(t){
			_sUrl += "&ExpandSiteId="+t;	
		}
		
		_sUrl += "&CurrSiteType=1";

		$('allTreeNav').src = _sUrl;
	}

	function getSeletedIds(){
		var sSelIds = $('allTreeNav').contentWindow.getCheckValues();		
		if((!sSelIds || sSelIds.length == 0)){
			Ext.Msg.alert(wcm.LANG.PHOTO_CONFIRM_54 || "请选择目标分类");
			return false;
		}
		var cbr = wcm.CrashBoarder.get("Dialog_ImageKind_Selector");
			cbr.notify({mode:m_sSelectMode,ids:sSelIds});
			cbr.hide();	
		return true;
	}
</script>
<style type="text/css">
	.iframe_container{
		width:223px;
		height:290px;
		padding:10px;
	}
	.ext-gecko .iframe_container{
		width:200px;
		height:280px;
		padding:10px;
	}
	button{
		height: 22px;
		background: #eeeeee;
		border: solid 1px silver;
		font-size: 12px;
		padding-left: 3px;
		padding-right: 3px;
	}
</style>
</head>

<body style="margin:0px;padding:0px;background-color:#fff;overflow-x:hidden;">
<div id="all_channels_tree" class="iframe_container">
	<div style="height:100%;">
		<iframe id="allTreeNav" target="_blank" style="width:100%;height:100%;" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>
	</div>
</div>
</body>
</html>