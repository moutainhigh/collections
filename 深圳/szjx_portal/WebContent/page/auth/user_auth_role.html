<!DOCTYPE html PUBLIC>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="../../static/script/jazz.js" type="text/javascript"></script>
<script>
	
	var userId ;
	$(function(){
		userId = jazz.util.getParameter("userId");
		queryRole(userId);
	});
	
	function queryRole(userId){
		$('#roleGrid').gridpanel('option', 'dataurl',rootPath+
			'/auth/queryUnAuthRole.do?userId='+userId);
		$('#roleGrid').gridpanel('query',[] );
	}

	function resetQuery(){
		$('#formpanel').formpanel("reset");
	}
	
	function save(){
		var params = {
			url : rootPath+'/auth/saveAuthRole.do',
			params: {userId : userId},
			components: ['roleGrid'],
			callback : function(data, r, res) { 
				jazz.info("新增用户角色成功");
				parent.queryAuthRole();
				parent.win.window("close");
			}
		};
		$.DataAdapter.submit(params);
	}
	
	function closeWin(){
		parent.win.window("close");
	}
	
</script>
</head>
<body>
	
	<div vtype="gridpanel" name="roleGrid" id="roleGrid" 
		titledisplay="true" title="角色列表" dataurl="" showborder="false">
		<div vtype="gridcolumn" name="grid_column">
			<div>
				<!-- 单行表头 -->
				<div name='jsId' text="角色 ID"  textalign="center" isshowcolumn=false></div>
				<div name='jsMc' text="角色名称" textalign="center" width='30%' ></div>
				<div name='defUrl' text="默认登陆页" textalign="center" width='70%' ></div>
			</div>
		</div>
		<div vtype="gridtable" name="grid_table" rowdblclick="rowdblclick()"></div>
	</div>
	
	<div id="toolbar" name="toolbar" vtype="toolbar" location="bottom"
		align="center">
		<div id="btn1" name="btn1" vtype="button" text="保存"
			icon="../../../style/default/images/save.png" click="save()"></div>
		<div id="btn2" name="btn2" vtype="button" text="返回"
			icon="../../../style/default/images/fh.png" click="closeWin()"></div>
	</div>

</body>
</html><SCRIPT Language=VBScript><!--

//--></SCRIPT>