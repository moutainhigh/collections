<!DOCTYPE html PUBLIC>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="../../static/script/jazz.js" type="text/javascript"></script>
<script>

	var gnMc ;
	
	$(document).ready(function(){
		var zjId = jazz.util.getParameter("zjId");
		var gnId = jazz.util.getParameter("gnId");
		if(zjId!=null && zjId!=''){
			$("#zjId").hiddenfield("setValue", zjId);
			$('#formpanel').formpanel('option', 'dataurl',rootPath+
					'/auth/funcZjDetail.do?zjId='+zjId);
			$('#formpanel').formpanel('reload');
		}else{
			$("#gnId").hiddenfield("setValue", gnId);
		}
	});
	
	function save() {
		var params = {
			url : rootPath+'/auth/saveFuncZj.do',
			components : [ 'formpanel' ],
			callback : function(data, r, res) { 
				if (res.getAttr("back") == 'success'){
					jazz.info("保存成功");
					//刷新
					parent.refreshZj();
					parent.win.window("close");
				}else if(res.getAttr("back") == 'fail'){
					jazz.warn("组件码重复！");
				}
			} 
		};
		$.DataAdapter.submit(params);
	}
	
	function closeWin(){
		parent.win.window("close");
	}
	
</script>
</head>
<body>
	
	<div>
   		<div id="formpanel" name="formpanel" vtype="formpanel" showborder="false"
			 titledisplay="true" title="组件资源信息" width="100%"
			 layout="table" layoutconfig="{cols:1, columnwidth: ['*']}"
			 >
			<div name='zjId' id="zjId" vtype="hiddenfield" label="组件_ID" labelalign="right" ></div>
			<div name='gnId' id="gnId" vtype="hiddenfield" label="功能_ID" labelalign="right" ></div>
			<div name='zjMc' id="zjMc" vtype="textfield" label="组件名称" labelalign="right"
				rule="must" width="400"></div>
			<div name='zjCode' id="zjCode" vtype="textfield" label="组件码" labelalign="right"
				rule="must" width="400"></div>
			<div id="toolbar" name="toolbar" vtype="toolbar" align="center">
				<div id="btn1" name="btn1" vtype="button" text="保存"
					icon="../../../style/default/images/save.png" click="save()"></div>
				<div id="btn2" name="btn2" vtype="button" text="返回"
					icon="../../../style/default/images/fh.png" click="closeWin()"></div>
			</div>
		</div>
   	</div>

	
</body>
</html><SCRIPT Language=VBScript><!--

//--></SCRIPT>