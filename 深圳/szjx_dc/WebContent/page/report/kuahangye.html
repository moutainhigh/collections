<!DOCTYPE html >
<html style="height: 100%">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body style="height: 100%; margin: 0">
	<div id="container" style="height: 100%"></div>
	<script type="text/javascript" src="../../static/script/echarts.js"></script>
	<script type="text/javascript"
		src="../../static/script/jquery-1.8.3.js"></script>
	<script type="text/javascript">
		window.console = window.console || (function() {
			var c = {};
			c.log = c.warn = c.debug = c.info = c.error = c.time = c.dir = c.profile = c.clear = c.exception = c.trace = c.assert = function() {
			};
			return c;
		})();
		var date = new Date;
		var year = date.getFullYear();
		function getDate() {
			var mycars = new Array();
			mycars[0] = (year - 2) + '年';
			mycars[1] = (year - 1) + '年';
			mycars[2] = (year) + '年';
			return mycars;
		}
		
		$(function (){
		var dom = document.getElementById("container");
		var myChart = echarts.init(dom);
		var app = {};
		option = null;
		app.title = '跨行业综合分析';
		myChart.showLoading({
			text : '正在读取数据...'
		});
		var datas;
		getData();
		function getData(){
			$.ajax({
				type : "post",
				url : "../../quert12315Controller/getKuaHangYe.do",
				data : "timess=" + "1",
				dataType : "text",
				async : true,
				cache : false,
				success : function(ress) {
					datas = eval("(" + ress + ")");
					myChart.hideLoading();
					setData(datas);
				}
			});
		}
		function setData(datas){
		option = {
			title : {
				text : '跨行业综合分析',
				subtext : '各行业商事主体存续户数走势',
				x : 'center'
			},
			tooltip : {
				trigger : 'axis',
				axisPointer : { // 坐标轴指示器，坐标轴触发有效
					type : 'shadow' // 默认为直线，可选为：'line' | 'shadow'
				}
			},
			legend : {
				right : '20',
				data : getDate()
			},
			backgroundColor : 'rgb(243,243,243)',
			grid : {
				left : '3%',
				right : '4%',
				bottom : '3%',
				containLabel : true
			},
			xAxis : [ {
				type : 'category',
				name : '行业类别',
				data : [ '农、林、牧、渔业', '采矿业', '制造业', '电力、燃气及水的生产和供应业', '建筑业', '批发和零售业', '交通运输、仓储和邮政业', '住宿和餐饮业', '信息传输、软件和信息技术服务业', '金融业', '房地产业', '租赁和商务服务业', '科学研究和技术服务业', '水利、环境和公共设施管理业', '居民服务、修理和其他服务业', '教育', '卫生和社会工作', '文化、体育和娱乐业', '公共管理、社会保障和社会组织', '国际组织' ],
				axisPointer : {
					type : 'line'
				}
			} ],
			yAxis : [ {
				type : 'value',
				name : '户数'
			} ],
			series : [ {
				name : (year - 2) + '年',
				type : 'bar',
				data : [ datas[0].农林牧渔业,
				         datas[0].采矿业,
				         datas[0].制造业,
				         datas[0].电力燃气及水的生产和供应业,
				         datas[0].建筑业,
				         datas[0].批发和零售业,
				         datas[0].交通运输仓储和邮政业,
				         datas[0].住宿和餐饮业,
				         datas[0].信息传输软件和信息技术服务业,
				         datas[0].金融业,
				         datas[0].房地产业,
				         datas[0].租赁和商务服务业,
				         datas[0].科学研究和技术服务业,
				         datas[0].水利环境和公共设施管理业,
				         datas[0].居民服务修理和其他服务业,
				         datas[0].教育,
				         datas[0].卫生和社会工作,
				         datas[0].文化体育和娱乐业,
				         datas[0].公共管理社会保障和社会组织,
				         datas[0].国际组织]
			}, {
				name : (year - 1) + '年',
				type : 'bar',

				data : [ datas[1].农林牧渔业,
				         datas[1].采矿业,
				         datas[1].制造业,
				         datas[1].电力燃气及水的生产和供应业,
				         datas[1].建筑业,
				         datas[1].批发和零售业,
				         datas[1].交通运输仓储和邮政业,
				         datas[1].住宿和餐饮业,
				         datas[1].信息传输软件和信息技术服务业,
				         datas[1].金融业,
				         datas[1].房地产业,
				         datas[1].租赁和商务服务业,
				         datas[1].科学研究和技术服务业,
				         datas[1].水利环境和公共设施管理业,
				         datas[1].居民服务修理和其他服务业,
				         datas[1].教育,
				         datas[1].卫生和社会工作,
				         datas[1].文化体育和娱乐业,
				         datas[1].公共管理社会保障和社会组织,
				         datas[1].国际组织]
			}, {
				name : year + '年',
				type : 'bar',
				//type:'line',
				//yAxisIndex: 3,
				data : [ datas[2].农林牧渔业,
				         datas[2].采矿业,
				         datas[2].制造业,
				         datas[2].电力燃气及水的生产和供应业,
				         datas[2].建筑业,
				         datas[2].批发和零售业,
				         datas[2].交通运输仓储和邮政业,
				         datas[2].住宿和餐饮业,
				         datas[2].信息传输软件和信息技术服务业,
				         datas[2].金融业,
				         datas[2].房地产业,
				         datas[2].租赁和商务服务业,
				         datas[2].科学研究和技术服务业,
				         datas[2].水利环境和公共设施管理业,
				         datas[2].居民服务修理和其他服务业,
				         datas[2].教育,
				         datas[2].卫生和社会工作,
				         datas[2].文化体育和娱乐业,
				         datas[2].公共管理社会保障和社会组织,
				         datas[2].国际组织]
			}/* , {
				name : '总数',
				//type:'bar',
				type : 'line',
				//yAxisIndex: 3,
				data : [ datas[3].农、林、牧、渔业,
				         datas[3].采矿业,
				         datas[3].制造业,
				         datas[3].电力、燃气及水的生产和供应业,
				         datas[3].建筑业,
				         datas[3].批发和零售业,
				         datas[3].交通运输、仓储和邮政业,
				         datas[3].住宿和餐饮业,
				         datas[3].信息传输、软件和信息技术服务业,
				         datas[3].金融业,
				         datas[3].房地产业,
				         datas[3].租赁和商务服务业,
				         datas[3].科学研究和技术服务业,
				         datas[3].水利、环境和公共设施管理业,
				         datas[3].居民服务、修理和其他服务业,
				         datas[3].教育,
				         datas[3].卫生和社会工作,
				         datas[3].文化、体育和娱乐业,
				         datas[3].公共管理、社会保障和社会组织,
				         datas[3].国际组织 ]
			}  */
			]
		};
		;
		if (option && typeof option === "object") {
			myChart.setOption(option, true);
		}
	}	
})
	</script>
</body>
</html>