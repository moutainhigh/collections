<!DOCTYPE html>
<html style="height: 100%">
<head>
<meta charset="UTF-8">
<title>市场规范主题分析</title>
</head>
<body style="height: 100%; margin: 0">
	<div id="container" style="height: 100%"></div>
	<script type="text/javascript" src="../../static/script/echarts.js"></script>
	<script type="text/javascript"
		src="../../static/script/jquery-1.8.3.js"></script>
	<script type="text/javascript">
	window.console = window.console || (function() {
		var c = {};
		c.log = c.warn = c.debug = c.info = c.error = c.time = c.dir = c.profile = c.clear = c.exception = c.trace = c.assert = function() {
		};
		return c;
	})();
	
	var date = new Date;
	var year = date.getFullYear();
	function getDate() {
		var mycars = new Array();
		mycars[0] = (year - 2) + '年';
		mycars[1] = (year - 1) + '年';
		mycars[2] = (year) + '年';
		return mycars;
	}
	
	$(function (){
		var dom = document.getElementById("container");
		var myChart = echarts.init(dom);
		var app = {};
		option = null;
		app.title = '市场规范主题分析';
		myChart.showLoading({
			text : '正在读取数据...'
		});
		var datas;
		getData();
		function getData(){
			$.ajax({
				type : "post",
				url : "../../quert12315Controller/shiChangGuiFan.do",
				data : "timess=" + "1",
				dataType : "text",
				async : true,
				cache : false,
				success : function(ress) {
					datas = eval("(" + ress + ")");
					myChart.hideLoading();
					setData(datas);
				}
			});
		}
		
		function setData(datas){
			option = {
					title : {
						text : '市场规范主题分析',
						subtext : '涉及不同广告业务的商事主体',
						x : 'center'
					},
					tooltip : {
						trigger : 'axis',
						axisPointer : { // 坐标轴指示器，坐标轴触发有效
							type : 'shadow' // 默认为直线，可选为：'line' | 'shadow'
						}
					},
					legend : {
						right : '40'
					/**,
					        data:['内设机构','外派机构']**/
					},
					backgroundColor : 'rgb(243,243,243)',
					grid : {
						left : '3%',
						right : '4%',
						bottom : '3%',
						containLabel : true
					},
					xAxis : [ {
						type : 'category',
						data : [ '广告设计', '广告制作', '广告代理', '广告发布', '品牌代理', '品牌服务', '营销策划' ],
						name : '经营范围'
					} ],
					yAxis : [ {
						type : 'value',
						name : '商事主体数量'
					} ],
					series : [ {
						name : '数量',
						type : 'bar',
						data : [ datas[0].cnt,datas[1].cnt, datas[2].cnt, datas[3].cnt, datas[4].cnt, datas[5].cnt, datas[6].cnt ]
					} ]
				};
				;
				if (option && typeof option === "object") {
					myChart.setOption(option, true);

				}
		}
		
	})
		
	</script>
</body>
</html>