<!DOCTYPE html>
<html style="height: 100%">
<head>
<meta charset="UTF-8">
<title>电子商务监管与服务分析</title>
</head>
<body style="height: 100%; margin: 0">
	<div id="container" style="height: 100%"></div>
	<script type="text/javascript" src="../../static/script/echarts.js"></script>
	<script type="text/javascript"
		src="../../static/script/jquery-1.8.3.js"></script>
	<script type="text/javascript">
		window.console = window.console || (function() {
			var c = {};
			c.log = c.warn = c.debug = c.info = c.error = c.time = c.dir = c.profile = c.clear = c.exception = c.trace = c.assert = function() {
			};
			return c;
		})();

		var date = new Date;
		var year = date.getFullYear();
		function getDate() {
			var mycars = new Array();
			mycars[0] = (year - 2) + '年';
			mycars[1] = (year - 1) + '年';
			mycars[2] = (year) + '年';
			return mycars;
		}

		$(function() {
			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			app.title = '电子商务监管与服务分析';
			myChart.showLoading({
				text : '正在读取数据...'
			});
			var datas;
			getData();

			function getData() {
				$.ajax({
					type : "post",
					url : "../../quert12315Controller/getDianZiShangWu.do",
					data : "timess=" + "1",
					dataType : "text",
					async : true,
					cache : false,
					success : function(ress) {
						datas = eval("(" + ress + ")");
						myChart.hideLoading();
						setData(datas);
					}
				});
			}

			function setData(datas) {
				option = {
					title : {
						text : '电子商务监管与服务分析',
						subtext : '电子商务消费投诉举报数近年趋势',
						x : 'center'
					},
					tooltip : {
						trigger : 'axis',
						axisPointer : { // 坐标轴指示器，坐标轴触发有效
							type : 'shadow' // 默认为直线，可选为：'line' | 'shadow'
						}
					},
					legend : {
						right : '20',
						data : getDate()
					},
					backgroundColor : 'rgb(243,243,243)',
					grid : {
						left : '3%',
						right : '4%',
						bottom : '3%',
						containLabel : true
					},
					xAxis : [ {
						type : 'category',
						data : [ '交易平台类', '应用类', '服务类', '互联网门户', '其他' ]
					} ],
					yAxis : [ {
						type : 'value',
						name : '件数'
					} ],
					series : [ {
						name : (year - 2) + '年',
						type : 'bar',
						data : [ datas[0].交易平台类, datas[0].应用类, datas[0].服务类, datas[0].互联网门户, datas[0].其他 ]
					}, {
						name : (year - 1) + '年',
						type : 'bar',

						data : [ datas[1].交易平台类, datas[1].应用类, datas[1].服务类, datas[1].互联网门户, datas[1].其他 ]
					}, {
						name : year + '年',
						type : 'bar',

						data : [ datas[2].交易平台类, datas[2].应用类, datas[2].服务类, datas[2].互联网门户, datas[2].其他 ]
					} ]
				};
				;

				if (option && typeof option === "object") {
					myChart.setOption(option, true);
				}
			}

		})
	</script>
</body>
</html>